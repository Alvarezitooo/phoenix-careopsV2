(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4],{7185:function(e,s,t){Promise.resolve().then(t.bind(t,1810))},1810:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return S}});var a=t(7821),l=t(8078),n=t(9198),r=t(6576);let i=(0,r.Z)("euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);var c=t(6515);let o=(0,r.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var d=t(5118);let x=(0,r.Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),u=(0,r.Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var m=t(9086),h=t(8002);let p=(0,r.Z)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var j=t(1996),f=t(5706),g=t(8304),v=t(8504),N=t(9024);let b=(0,r.Z)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var y=t(750);function w(e){let{onDocumentAnalyzed:s,userId:t}=e,[n,r]=(0,l.useState)(!1),[i,o]=(0,l.useState)(null),[x,u]=(0,l.useState)(null),h=(0,l.useRef)(null),p=async e=>{if(e){if(!["image/jpeg","image/png","image/webp","application/pdf","text/plain"].includes(e.type)){o("Type de fichier non support\xe9. Utilisez JPG, PNG, PDF ou TXT.");return}if(e.size>5242880){o("Le fichier est trop volumineux. Maximum 5MB.");return}r(!0),o(null),u(null);try{let a=new FileReader;a.onload=async a=>{var l;let n=null===(l=a.target)||void 0===l?void 0:l.result,r=e.type.includes("image")?"scan":e.type.includes("pdf")?"pdf":"text",i=await fetch("/api/chat/analyze-document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document:n,userId:t,documentType:r,fileName:e.name})});if(!i.ok)throw Error("Erreur lors de l'analyse du document");let c=await i.json();u("Document analys\xe9 avec succ\xe8s !"),s(c.analysis||c.fullAnalysis)},a.readAsDataURL(e)}catch(e){console.error("Erreur analyse document:",e),o(e.message||"Erreur lors de l'analyse du document")}finally{r(!1)}}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{onDrop:e=>{e.preventDefault();let s=Array.from(e.dataTransfer.files);s.length>0&&p(s[0])},onDragOver:e=>{e.preventDefault()},className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-rose-400 transition-colors cursor-pointer",onClick:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)("input",{ref:h,type:"file",accept:".jpg,.jpeg,.png,.webp,.pdf,.txt",onChange:e=>{var s;return(null===(s=e.target.files)||void 0===s?void 0:s[0])&&p(e.target.files[0])},className:"hidden"}),n?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(d.Z,{className:"h-12 w-12 text-rose-500 animate-spin mx-auto"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Phoenix analyse votre document..."})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsx)(N.Z,{className:"h-8 w-8 text-slate-400"}),(0,a.jsx)(c.Z,{className:"h-8 w-8 text-slate-400"}),(0,a.jsx)(b,{className:"h-8 w-8 text-slate-400"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-700 font-medium",children:"Glissez votre document ici ou cliquez pour choisir"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 mt-2",children:"Notification MDPH, certificat m\xe9dical, courrier CAF..."}),(0,a.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"JPG, PNG, PDF, TXT • Max 5MB"})]})]})]}),i&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm",children:i})]}),x&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-green-600 bg-green-50 p-3 rounded-lg",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm",children:x})]}),(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:[(0,a.jsx)("p",{className:"font-medium mb-2",children:"Phoenix peut analyser :"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:"• Notifications et d\xe9cisions MDPH"}),(0,a.jsx)("li",{children:"• Certificats m\xe9dicaux et bilans"}),(0,a.jsx)("li",{children:"• Courriers CAF et organismes"}),(0,a.jsx)("li",{children:"• Formulaires de demande d'aides"}),(0,a.jsx)("li",{children:"• Documents scolaires (PPS, PAI...)"})]})]})]})}let D=(0,r.Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function k(){let[e,s]=(0,l.useState)(null),t=[{id:"document-analysis",title:"Upload → Analyse → Dashboard",description:"Document analys\xe9 automatiquement et ajout\xe9 au dossier",steps:[{icon:c.Z,text:"Upload document",color:"bg-blue-100 text-blue-600"},{icon:x,text:"Analyse Phoenix",color:"bg-purple-100 text-purple-600"},{icon:o,text:"\xc9ch\xe9ances d\xe9tect\xe9es",color:"bg-orange-100 text-orange-600"},{icon:i,text:"Droits identifi\xe9s",color:"bg-green-100 text-green-600"}]},{id:"contextual-help",title:"Dashboard → Questions contextuelles",description:"Chaque \xe9l\xe9ment du dashboard connect\xe9 \xe0 Phoenix",steps:[{icon:i,text:"Aide AEEH",color:"bg-green-100 text-green-600"},{icon:h.Z,text:"Comment renouveler ?",color:"bg-rose-100 text-rose-600"},{icon:x,text:"R\xe9ponse personnalis\xe9e",color:"bg-purple-100 text-purple-600"}]},{id:"proactive-suggestions",title:"Syst\xe8me proactif intelligent",description:"Phoenix anticipe vos besoins selon votre profil",steps:[{icon:o,text:"\xc9ch\xe9ance d\xe9tect\xe9e",color:"bg-orange-100 text-orange-600"},{icon:x,text:"Alerte Phoenix",color:"bg-purple-100 text-purple-600"},{icon:h.Z,text:"Guidance automatique",color:"bg-rose-100 text-rose-600"}]}];return(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"\uD83D\uDD17 \xc9cosyst\xe8me Interconnect\xe9"}),(0,a.jsx)("div",{className:"space-y-4",children:t.map(t=>(0,a.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4",children:[(0,a.jsx)("button",{onClick:()=>s(e===t.id?null:t.id),className:"w-full text-left",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-slate-900",children:t.title}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:t.description})]}),(0,a.jsx)(D,{className:"h-5 w-5 text-slate-400 transition-transform ".concat(e===t.id?"rotate-90":"")})]})}),e===t.id&&(0,a.jsx)("div",{className:"mt-4 flex items-center space-x-2 overflow-x-auto pb-2",children:t.steps.map((e,s)=>{let l=e.icon;return(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color),children:(0,a.jsx)(l,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-700 whitespace-nowrap",children:e.text}),s<t.steps.length-1&&(0,a.jsx)(D,{className:"h-4 w-4 text-slate-300 mx-2"})]},s)})})]},t.id))}),(0,a.jsx)("div",{className:"mt-6 p-4 bg-gradient-to-r from-rose-50 to-purple-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(x,{className:"h-5 w-5 text-purple-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-slate-900",children:"Intelligence contextuelle"}),(0,a.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:"Phoenix conna\xeet votre famille, vos aides actuelles et vos \xe9ch\xe9ances pour des r\xe9ponses ultra-personnalis\xe9es."})]})]})})]})}var C=t(6446);function S(){let{user:e}=(0,f.K)(),s=(0,v.useRouter)(),[r,N]=(0,l.useState)(!1),[b,y]=(0,l.useState)("resume"),[D,S]=(0,l.useState)(null),[Z,A]=(0,l.useState)(!1),{aides:P,loading:M}=(0,g.fN)(),{documents:I,loading:_}=(0,g.GK)(),{deadlines:E,loading:z}=(0,g.hT)(),{profile:T,children:q,loading:F}=(0,g.mH)(),G=e=>{let t=encodeURIComponent(e);s.push("/chat?q=".concat(t))},R=e=>{switch(e){case"actif":case"valide":return"text-green-600 bg-green-50";case"en_attente":case"expire_bientot":return"text-orange-600 bg-orange-50";case"refuse":case"expire":return"text-red-600 bg-red-50";default:return"text-slate-600 bg-slate-50"}},H=e=>{switch(e){case"haute":return"text-red-600 bg-red-50";case"moyenne":return"text-orange-600 bg-orange-50";case"basse":return"text-blue-600 bg-blue-50";default:return"text-slate-600 bg-slate-50"}},O=e=>{switch(e){case"renouvellement":return"\uD83D\uDD04";case"rdv":return"\uD83D\uDC65";case"demarche":return"\uD83D\uDCCB";default:return"\uD83D\uDCC5"}},J=e=>{let s=new Date;return Math.ceil((new Date(e).getTime()-s.getTime())/864e5)},U=e=>e<0?"text-red-700 bg-red-100":e<=7?"text-red-600 bg-red-50":e<=30?"text-orange-600 bg-orange-50":"text-slate-600 bg-slate-50",K=async()=>{A(!0);try{let{supabase:s}=await Promise.resolve().then(t.bind(t,9905)),{data:{session:a}}=await s.auth.getSession(),l=null==a?void 0:a.access_token;if(!l)throw Error("Session expir\xe9e");let n=await fetch("http://localhost:8000/api/summary/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({user_id:null==e?void 0:e.id,context:{aides:P,deadlines:E,documents:I,profile:T}})});if(!n.ok)throw Error("Erreur g\xe9n\xe9ration r\xe9sum\xe9");let r=await n.json();S(r.summary)}catch(e){console.error("Erreur:",e),S("❌ Impossible de g\xe9n\xe9rer le r\xe9sum\xe9. R\xe9essayez plus tard.")}finally{A(!1)}},Q=[{id:"resume",label:"R\xe9sum\xe9",icon:n.Z},{id:"aides",label:"Mes Aides",icon:i},{id:"documents",label:"Documents",icon:c.Z},{id:"planning",label:"Planning",icon:o}];return F?(0,a.jsx)("div",{className:"h-full bg-slate-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.Z,{className:"h-12 w-12 text-rose-500 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Chargement de votre dossier..."})]})}):(0,a.jsxs)("div",{className:"h-full bg-slate-50 overflow-auto",children:[(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Mon Dossier Familial"}),(0,a.jsxs)("p",{className:"text-slate-600 mt-2",children:["Bienvenue ",(null==e?void 0:e.email)||(null==T?void 0:T.name),", voici un aper\xe7u de votre situation"]})]}),(0,a.jsx)("div",{className:"flex space-x-1 mb-8 bg-white rounded-xl p-1 shadow-sm",children:Q.map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>y(e.id),className:"flex items-center space-x-2 px-4 py-3 rounded-lg font-medium transition-colors ".concat(b===e.id?"bg-rose-500 text-white":"text-slate-600 hover:bg-slate-100"),children:[(0,a.jsx)(s,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:e.label})]},e.id)})}),"resume"===b&&(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-rose-500 to-pink-600 rounded-xl p-6 shadow-lg text-white",children:[(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(x,{className:"h-6 w-6"}),(0,a.jsx)("h3",{className:"text-xl font-bold",children:"R\xe9sum\xe9 Intelligent Phoenix"})]}),(0,a.jsx)("p",{className:"text-rose-100 text-sm mb-4",children:"G\xe9n\xe9rez un r\xe9sum\xe9 personnalis\xe9 de votre situation avec des recommandations d'actions."}),(0,a.jsx)("button",{onClick:K,disabled:Z,className:"bg-white text-rose-600 px-6 py-2 rounded-lg font-medium hover:bg-rose-50 transition-colors disabled:opacity-50 flex items-center gap-2",children:Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 animate-spin"}),"G\xe9n\xe9ration en cours..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{className:"h-4 w-4"}),"G\xe9n\xe9rer mon r\xe9sum\xe9"]})})]})}),D&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-rose-400",children:(0,a.jsx)("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4 text-white prose prose-invert prose-sm max-w-none",children:(0,a.jsx)(C.UG,{children:D})})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"\uD83D\uDC68‍\uD83D\uDC69‍\uD83D\uDC67‍\uD83D\uDC66 Ma Famille"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 text-slate-400"}),(0,a.jsxs)("span",{className:"text-slate-700",children:[(null==T?void 0:T.name)||(null==e?void 0:e.email)," - Parent r\xe9f\xe9rent"]})]}),null==q?void 0:q.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDC76"}),(0,a.jsxs)("span",{className:"text-slate-700",children:[e.name," (",e.age," ans",e.handicap_type?", ".concat(e.handicap_type):"",")"]})]},e.id)),T&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(u,{className:"h-5 w-5 text-slate-400"}),(0,a.jsxs)("span",{className:"text-slate-500",children:["Situation: ",T.situation||"Non renseign\xe9",T.departement&&" • ".concat(T.departement)]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(k,{}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"\uD83D\uDEA8 Alertes"}),(0,a.jsx)("div",{className:"space-y-3",children:(null==E?void 0:E.filter(e=>7>=J(e.date)).length)>0?E.filter(e=>7>=J(e.date)).map(e=>(0,a.jsxs)("div",{className:"flex items-start justify-between p-3 bg-orange-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 text-orange-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-orange-800",children:e.titre}),(0,a.jsx)("p",{className:"text-xs text-orange-600",children:0===J(e.date)?"Aujourd'hui":1===J(e.date)?"Demain":"Dans ".concat(J(e.date)," jours")})]})]}),(0,a.jsx)("button",{onClick:()=>G("Aide-moi pour : ".concat(e.titre)),className:"p-1 text-orange-600 hover:text-orange-800 hover:bg-orange-100 rounded transition-colors",title:"Demander aide \xe0 Phoenix",children:(0,a.jsx)(h.Z,{className:"h-4 w-4"})})]},e.id)):(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"Aucune alerte pour le moment ✅"})})]})]})]}),"aides"===b&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"\uD83D\uDCB0 Mes Aides et Allocations"}),(0,a.jsx)("button",{onClick:()=>G("Quelles autres aides puis-je demander pour ma situation ?"),className:"bg-rose-500 text-white px-4 py-2 rounded-lg hover:bg-rose-600 transition-colors",children:"+ D\xe9couvrir d'autres aides"})]}),(0,a.jsx)("div",{className:"grid gap-4",children:M?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(d.Z,{className:"h-8 w-8 text-rose-500 animate-spin mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Chargement de vos aides..."})]}):(null==P?void 0:P.length)>0?P.map(e=>(0,a.jsx)("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900",children:e.nom}),(0,a.jsx)("p",{className:"text-slate-600",children:e.montant}),e.echeance&&(0,a.jsxs)("p",{className:"text-xs text-orange-600 mt-1",children:["\xc9ch\xe9ance: ",new Date(e.echeance).toLocaleDateString("fr-FR")]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(R(e.statut)),children:e.statut.replace("_"," ")}),(0,a.jsx)("button",{onClick:()=>G("Comment renouveler ou optimiser mon aide ".concat(e.nom," ?")),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"Demander \xe0 Phoenix",children:(0,a.jsx)(h.Z,{className:"h-4 w-4"})})]})]})},e.id)):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-slate-600",children:"Aucune aide enregistr\xe9e pour le moment."}),(0,a.jsx)("button",{onClick:()=>G("Quelles aides puis-je demander pour ma situation familiale ?"),className:"mt-4 text-rose-600 hover:text-rose-700 font-medium",children:"D\xe9couvrir les aides disponibles"})]})})]}),"documents"===b&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"\uD83D\uDCC4 Mes Documents"}),(0,a.jsx)("button",{onClick:()=>N(!0),className:"bg-rose-500 text-white px-4 py-2 rounded-lg hover:bg-rose-600 transition-colors",children:"+ Ajouter document"})]}),(0,a.jsx)("div",{className:"grid gap-4",children:_?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(d.Z,{className:"h-8 w-8 text-rose-500 animate-spin mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Chargement de vos documents..."})]}):(null==I?void 0:I.length)>0?I.map(e=>(0,a.jsx)("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 text-slate-400 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900",children:e.nom}),(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:[e.type," • ",e.date]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(R(e.statut)),children:e.statut.replace("_"," ")}),(0,a.jsx)("button",{onClick:()=>G("Peux-tu m'expliquer ce document ".concat(e.nom," et me dire ce que je dois faire ?")),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"Analyser avec Phoenix",children:(0,a.jsx)(p,{className:"h-4 w-4"})})]})]})},e.id)):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-slate-600",children:"Aucun document pour le moment."}),(0,a.jsx)("button",{onClick:()=>N(!0),className:"mt-4 text-rose-600 hover:text-rose-700 font-medium",children:"Ajouter votre premier document"})]})})]}),"planning"===b&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"bg-red-100 p-2 rounded-lg",children:(0,a.jsx)(m.Z,{className:"h-5 w-5 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Urgences"}),(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(null==E?void 0:E.filter(e=>7>=J(e.date)).length)||0})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"bg-orange-100 p-2 rounded-lg",children:(0,a.jsx)(j.Z,{className:"h-5 w-5 text-orange-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Ce mois-ci"}),(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(null==E?void 0:E.filter(e=>30>=J(e.date)&&J(e.date)>0).length)||0})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"bg-blue-100 p-2 rounded-lg",children:(0,a.jsx)(o,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"\xc0 venir"}),(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(null==E?void 0:E.filter(e=>J(e.date)>30).length)||0})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"\uD83D\uDCC5 Prochaines \xc9ch\xe9ances"}),(0,a.jsx)("button",{onClick:()=>G("Quelles sont les prochaines d\xe9marches importantes \xe0 pr\xe9voir ?"),className:"bg-rose-500 text-white px-4 py-2 rounded-lg hover:bg-rose-600 transition-colors",children:"+ Ajouter \xe9ch\xe9ance"})]}),(0,a.jsx)("div",{className:"space-y-3",children:z?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(d.Z,{className:"h-8 w-8 text-rose-500 animate-spin mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Chargement de vos \xe9ch\xe9ances..."})]}):(null==E?void 0:E.length)>0?E.sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime()).map(e=>{let s=J(e.date);return(0,a.jsx)("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4 flex-1",children:[(0,a.jsx)("span",{className:"text-2xl",children:O(e.type)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900",children:e.titre}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[(0,a.jsx)("p",{className:"text-sm text-slate-600",children:new Date(e.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(H(e.priorite)),children:e.priorite})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(U(s)),children:s<0?"Pass\xe9 de ".concat(Math.abs(s)," jour").concat(Math.abs(s)>1?"s":""):0===s?"Aujourd'hui":1===s?"Demain":"Dans ".concat(s," jours")}),(0,a.jsx)("button",{onClick:()=>G("Comment pr\xe9parer et r\xe9ussir : ".concat(e.titre," ? Quels documents et d\xe9marches ?")),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"Aide de Phoenix",children:(0,a.jsx)(h.Z,{className:"h-4 w-4"})})]})]})},e.id)}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-slate-600",children:"Aucune \xe9ch\xe9ance programm\xe9e."}),(0,a.jsx)("button",{onClick:()=>G("Quelles sont les d\xe9marches importantes \xe0 pr\xe9voir pour ma situation ?"),className:"mt-4 text-rose-600 hover:text-rose-700 font-medium",children:"Planifier mes prochaines d\xe9marches"})]})})]})]})]}),r&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full max-h-96 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Analyser un document"}),(0,a.jsx)("button",{onClick:()=>N(!1),className:"text-slate-400 hover:text-slate-600",children:"✕"})]}),(0,a.jsx)(w,{onDocumentAnalyzed:e=>{N(!1)},userId:(null==e?void 0:e.id)||""})]})})]})}},5706:function(e,s,t){"use strict";t.d(s,{H:function(){return i},K:function(){return c}});var a=t(7821),l=t(8078),n=t(9905);let r=(0,l.createContext)(void 0);function i(e){let{children:s}=e,[t,i]=(0,l.useState)(null),[c,o]=(0,l.useState)(null),[d,x]=(0,l.useState)(!0);(0,l.useEffect)(()=>{n.supabase.auth.getSession().then(e=>{var s;let{data:{session:t}}=e;o(t),i(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),x(!1)});let{data:{subscription:e}}=n.supabase.auth.onAuthStateChange((e,s)=>{var t;o(s),i(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),x(!1)});return()=>e.unsubscribe()},[]);let u=async(e,s,t)=>{let{data:a,error:l}=await n.supabase.auth.signUp({email:e,password:s,options:{data:{name:t}}});return{data:a,error:l}},m=async(e,s)=>{let{data:t,error:a}=await n.supabase.auth.signInWithPassword({email:e,password:s});return{data:t,error:a}},h=async()=>{await n.supabase.auth.signOut()},p=async e=>{let{data:s,error:t}=await n.supabase.auth.resetPasswordForEmail(e);return{data:s,error:t}};return(0,a.jsx)(r.Provider,{value:{user:t,session:c,loading:d,signUp:u,signIn:m,signOut:h,resetPassword:p},children:s})}function c(){let e=(0,l.useContext)(r);if(void 0===e)throw Error("useSupabaseAuth must be used within an AuthProvider");return e}},8304:function(e,s,t){"use strict";t.d(s,{GK:function(){return i},fN:function(){return r},hT:function(){return c},mH:function(){return o}});var a=t(8078),l=t(9905),n=t(5706);function r(){let{user:e}=(0,n.K)(),[s,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[c,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!e){i(!1);return}(async()=>{try{let{data:s,error:a}=await l.supabase.from("user_aides").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(a)throw a;t(s||[])}catch(e){o(e.message)}finally{i(!1)}})()},[e]),{aides:s,loading:r,error:c}}function i(){let{user:e}=(0,n.K)(),[s,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[c,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!e){i(!1);return}(async()=>{try{let{data:s,error:a}=await l.supabase.from("user_documents").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(a)throw a;t(s||[])}catch(e){o(e.message)}finally{i(!1)}})()},[e]),{documents:s,loading:r,error:c}}function c(){let{user:e}=(0,n.K)(),[s,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[c,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!e){i(!1);return}(async()=>{try{let{data:s,error:a}=await l.supabase.from("user_deadlines").select("*").eq("user_id",e.id).order("date",{ascending:!0});if(a)throw a;t(s||[])}catch(e){o(e.message)}finally{i(!1)}})()},[e]),{deadlines:s,loading:r,error:c}}function o(){let{user:e}=(0,n.K)(),[s,t]=(0,a.useState)(null),[r,i]=(0,a.useState)([]),[c,o]=(0,a.useState)(!0),[d,x]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!e){o(!1);return}(async()=>{try{let{data:s,error:a}=await l.supabase.from("family_profiles").select("*").eq("user_id",e.id).single();if(a&&"PGRST116"!==a.code)throw a;if(t(s),s){let{data:e,error:t}=await l.supabase.from("children").select("*").eq("family_id",s.id);if(t)throw t;i(e||[])}}catch(e){x(e.message)}finally{o(!1)}})()},[e]),{profile:s,children:r,loading:c,error:d}}},9905:function(e,s,t){"use strict";t.d(s,{supabase:function(){return r}});var a=t(1620);let l="https://gvginoszwaccifrtackh.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd2Z2lub3N6d2FjY2lmcnRhY2toIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxMjQyNzgsImV4cCI6MjA3NDcwMDI3OH0.sbuGET5VLfo0VjwVugc_ix1F_b0ntqDVmrqckdP22ss";if(!l||!n)throw Error("Missing Supabase environment variables");let r=(0,a.eI)(l,n,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce",storage:{getItem:e=>{var s;return(null===(s=document.cookie.split("; ").find(s=>s.startsWith("".concat(e,"="))))||void 0===s?void 0:s.split("=")[1])||null},setItem:(e,s)=>{document.cookie="".concat(e,"=").concat(s,"; path=/; max-age=31536000; SameSite=Lax")},removeItem:e=>{document.cookie="".concat(e,"=; path=/; max-age=0")}}}})},1996:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(6576).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},8002:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(6576).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},9024:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(6576).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},9198:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(6576).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[620,695,115,253,744],function(){return e(e.s=7185)}),_N_E=e.O()}]);