(()=>{var e={};e.id=4,e.ids=[4],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},9411:e=>{"use strict";e.exports=require("node:path")},7742:e=>{"use strict";e.exports=require("node:process")},1041:e=>{"use strict";e.exports=require("node:url")},4598:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c}),t(5691),t(5474),t(2874),t(1163);var a=t(7105),r=t(5265),l=t(157),n=t.n(l),i=t(4665),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let c=["",{children:["(protected)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5691)),"/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5474)),"/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2874,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1163)),"/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/dashboard/page.tsx"],x="/(protected)/dashboard/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(protected)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9635:(e,s,t)=>{Promise.resolve().then(t.bind(t,8758))},8758:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var a=t(9899),r=t(5507),l=t(1614),n=t(1278);let i=(0,n.Z)("euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);var o=t(9587);let c=(0,n.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var d=t(2979);let x=(0,n.Z)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),m=(0,n.Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var u=t(433),h=t(3228),p=t(4767);let j=(0,n.Z)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var b=t(2070),g=t(1955),f=t(6614),v=t(6153),N=t(4342);let y=(0,n.Z)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var w=t(8954);function D({onDocumentAnalyzed:e,userId:s}){let[l,n]=(0,r.useState)(!1),[i,c]=(0,r.useState)(null),[x,m]=(0,r.useState)(null),u=(0,r.useRef)(null),p=async a=>{if(a){if(!["image/jpeg","image/png","image/webp","application/pdf","text/plain"].includes(a.type)){c("Type de fichier non support\xe9. Utilisez JPG, PNG, PDF ou TXT.");return}if(a.size>5242880){c("Le fichier est trop volumineux. Maximum 5MB.");return}n(!0),c(null),m(null);try{let r=new FileReader;r.onload=async r=>{let l=r.target?.result,n=a.type.includes("image")?"scan":a.type.includes("pdf")?"pdf":"text",{supabase:i}=await Promise.resolve().then(t.bind(t,24)),{data:{session:o}}=await i.auth.getSession(),c=o?.access_token;if(!c)throw Error("Vous devez \xeatre connect\xe9 pour analyser un document");console.log("\uD83D\uDCE4 Upload document avec token:",c.substring(0,20)+"...");let d=await fetch("/api/chat/analyze-document",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({document:l,userId:s,documentType:n,fileName:a.name})});if(!d.ok)throw Error("Erreur lors de l'analyse du document");let x=await d.json();m("Document analys\xe9 avec succ\xe8s !"),e(x.analysis||x.fullAnalysis)},r.readAsDataURL(a)}catch(e){console.error("Erreur analyse document:",e),c(e.message||"Erreur lors de l'analyse du document")}finally{n(!1)}}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{onDrop:e=>{e.preventDefault();let s=Array.from(e.dataTransfer.files);s.length>0&&p(s[0])},onDragOver:e=>{e.preventDefault()},className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-rose-400 transition-colors cursor-pointer",onClick:()=>u.current?.click(),children:[a.jsx("input",{ref:u,type:"file",accept:".jpg,.jpeg,.png,.webp,.pdf,.txt",onChange:e=>e.target.files?.[0]&&p(e.target.files[0]),className:"hidden"}),l?(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(d.Z,{className:"h-12 w-12 text-rose-500 animate-spin mx-auto"}),a.jsx("p",{className:"text-slate-600",children:"Phoenix analyse votre document..."})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[a.jsx(N.Z,{className:"h-8 w-8 text-slate-400"}),a.jsx(o.Z,{className:"h-8 w-8 text-slate-400"}),a.jsx(y,{className:"h-8 w-8 text-slate-400"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-slate-700 font-medium",children:"Glissez votre document ici ou cliquez pour choisir"}),a.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Notification MDPH, certificat m\xe9dical, courrier CAF..."}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"JPG, PNG, PDF, TXT • Max 5MB"})]})]})]}),i&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[a.jsx(h.Z,{className:"h-5 w-5 flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:i})]}),x&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-green-600 bg-green-50 p-3 rounded-lg",children:[a.jsx(w.Z,{className:"h-5 w-5 flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:x})]}),(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:[a.jsx("p",{className:"font-medium mb-2",children:"Phoenix peut analyser :"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[a.jsx("li",{children:"• Notifications et d\xe9cisions MDPH"}),a.jsx("li",{children:"• Certificats m\xe9dicaux et bilans"}),a.jsx("li",{children:"• Courriers CAF et organismes"}),a.jsx("li",{children:"• Formulaires de demande d'aides"}),a.jsx("li",{children:"• Documents scolaires (PPS, PAI...)"})]})]})]})}let k=(0,n.Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function C(){let[e,s]=(0,r.useState)(null),t=[{id:"contextual-help",title:"Dashboard → Chat contextuel",description:"Chaque bouton du dashboard lance une question pr\xe9-remplie dans le chat",steps:[{icon:i,text:"Clic sur aide AEEH",color:"bg-green-100 text-green-600"},{icon:p.Z,text:"Ouvre le chat",color:"bg-rose-100 text-rose-600"},{icon:m,text:"Question d\xe9j\xe0 pr\xeate",color:"bg-purple-100 text-purple-600"}]},{id:"document-upload",title:"Upload document (exp\xe9rimental)",description:"Analysez un document avec Phoenix IA",steps:[{icon:o.Z,text:"Upload fichier",color:"bg-blue-100 text-blue-600"},{icon:m,text:"Analyse IA",color:"bg-purple-100 text-purple-600"},{icon:p.Z,text:"R\xe9sultat affich\xe9",color:"bg-rose-100 text-rose-600"}]},{id:"real-alerts",title:"Alertes automatiques",description:"Affiche les \xe9ch\xe9ances \xe0 moins de 7 jours depuis Supabase",steps:[{icon:c,text:"Deadline Supabase",color:"bg-orange-100 text-orange-600"},{icon:m,text:"Calcul J-7",color:"bg-purple-100 text-purple-600"},{icon:p.Z,text:'Bouton "Demander aide"',color:"bg-rose-100 text-rose-600"}]}];return(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"\uD83D\uDD17 Fonctionnalit\xe9s actuelles"}),a.jsx("div",{className:"space-y-4",children:t.map(t=>(0,a.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsx("button",{onClick:()=>s(e===t.id?null:t.id),className:"w-full text-left",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-slate-900",children:t.title}),a.jsx("p",{className:"text-sm text-slate-600",children:t.description})]}),a.jsx(k,{className:`h-5 w-5 text-slate-400 transition-transform ${e===t.id?"rotate-90":""}`})]})}),e===t.id&&a.jsx("div",{className:"mt-4 flex items-center space-x-2 overflow-x-auto pb-2",children:t.steps.map((e,s)=>{let r=e.icon;return(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[a.jsx("div",{className:`p-2 rounded-lg ${e.color}`,children:a.jsx(r,{className:"h-4 w-4"})}),a.jsx("span",{className:"text-sm font-medium text-slate-700 whitespace-nowrap",children:e.text}),s<t.steps.length-1&&a.jsx(k,{className:"h-4 w-4 text-slate-300 mx-2"})]},s)})})]},t.id))}),a.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-rose-50 to-purple-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx(m,{className:"h-5 w-5 text-purple-600 mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-slate-900",children:"Chat IA avec contexte"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Le chat re\xe7oit automatiquement vos donn\xe9es (aides, documents, \xe9ch\xe9ances) pour des r\xe9ponses personnalis\xe9es."})]})]})})]})}var P=t(24),A=t(7866),M=t(7657);let Z=(0,n.Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function q({onComplete:e}){let{user:s}=(0,g.K)(),t=(0,v.useRouter)(),[n,i]=(0,r.useState)(1),[o,c]=(0,r.useState)(!1),[x,h]=(0,r.useState)({name:"",departement:"",situation:"parent_solo"}),[p,j]=(0,r.useState)([{name:"",age:"",handicap_type:""}]),b=e=>{p.length>1&&j(p.filter((s,t)=>t!==e))},f=(e,s,t)=>{let a=[...p];a[e]={...a[e],[s]:t},j(a)},N=()=>{switch(n){case 1:default:return!0;case 2:return""!==x.name.trim();case 3:return p.some(e=>""!==e.name.trim());case 4:return""!==x.departement.trim()}},y=async()=>{c(!0);try{if(!s)throw Error("Non connect\xe9");let{data:a,error:r}=await P.supabase.from("family_profiles").insert([{user_id:s.id,name:x.name,departement:x.departement,situation:x.situation,nb_enfants:p.filter(e=>""!==e.name.trim()).length}]).select().single();if(r)throw r;let l=p.filter(e=>""!==e.name.trim()).map(e=>({family_id:a.id,name:e.name,age:""===e.age?null:Number(e.age),handicap_type:e.handicap_type}));if(l.length>0){let{error:e}=await P.supabase.from("children").insert(l);if(e)throw e}e?e():(t.push("/dashboard"),t.refresh())}catch(e){console.error("Erreur onboarding:",e),alert("Erreur lors de la sauvegarde. R\xe9essayez.")}finally{c(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-rose-50 via-white to-purple-50 z-50 overflow-auto",children:a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-rose-100 rounded-full mb-4",children:a.jsx(A.Z,{className:"h-8 w-8 text-rose-500"})}),a.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Bienvenue sur Phoenix"}),a.jsx("p",{className:"text-slate-600",children:"Prenons quelques instants pour personnaliser votre exp\xe9rience"})]}),a.jsx("div",{className:"flex items-center justify-center space-x-2 mb-8",children:[1,2,3,4].map(e=>a.jsx("div",{className:`h-2 rounded-full transition-all ${e<=n?"w-12 bg-rose-500":"w-8 bg-slate-200"}`},e))}),1===n&&a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(m,{className:"h-12 w-12 text-purple-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"Phoenix vous accompagne"}),a.jsx("p",{className:"text-slate-600 text-lg mb-6",children:"Pour vous aider au mieux, Phoenix a besoin de comprendre votre situation familiale."}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-left",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"\uD83D\uDD12 Vos donn\xe9es sont priv\xe9es"})," : Elles restent dans votre espace personnel et permettent \xe0 Phoenix de personnaliser ses r\xe9ponses \xe0 votre situation."]})})]})}),2===n&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[a.jsx(l.Z,{className:"h-12 w-12 text-rose-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Parlons de vous"}),a.jsx("p",{className:"text-slate-600",children:"Comment souhaitez-vous \xeatre appel\xe9(e) ?"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Votre nom ou pr\xe9nom"}),a.jsx("input",{type:"text",value:x.name,onChange:e=>h({...x,name:e.target.value}),placeholder:"Ex: Marie, Thomas...",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-lg",autoFocus:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Votre situation familiale"}),(0,a.jsxs)("select",{value:x.situation,onChange:e=>h({...x,situation:e.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-lg",children:[a.jsx("option",{value:"parent_solo",children:"Parent solo"}),a.jsx("option",{value:"couple",children:"En couple"}),a.jsx("option",{value:"autre",children:"Autre"})]})]})]}),3===n&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[a.jsx(M.Z,{className:"h-12 w-12 text-rose-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Vos enfants"}),a.jsx("p",{className:"text-slate-600",children:"Parlez-nous de votre ou vos enfants"})]}),p.map((e,s)=>(0,a.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h3",{className:"font-medium text-slate-900",children:["Enfant ",s+1]}),p.length>1&&a.jsx("button",{onClick:()=>b(s),className:"text-red-500 hover:text-red-700 text-sm",children:"Retirer"})]}),a.jsx("input",{type:"text",value:e.name,onChange:e=>f(s,"name",e.target.value),placeholder:"Pr\xe9nom de l'enfant",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{type:"number",value:e.age,onChange:e=>f(s,"age",""===e.target.value?"":parseInt(e.target.value)),placeholder:"\xc2ge",min:"0",max:"30",className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent"}),a.jsx("input",{type:"text",value:e.handicap_type,onChange:e=>f(s,"handicap_type",e.target.value),placeholder:"Type de handicap",className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent"})]})]},s)),a.jsx("button",{onClick:()=>{j([...p,{name:"",age:"",handicap_type:""}])},className:"w-full py-2 border-2 border-dashed border-slate-300 rounded-lg text-slate-600 hover:border-rose-400 hover:text-rose-600 transition-colors",children:"+ Ajouter un autre enfant"})]}),4===n&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[a.jsx(u.Z,{className:"h-12 w-12 text-rose-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Votre d\xe9partement"}),a.jsx("p",{className:"text-slate-600",children:"Les aides et d\xe9marches varient selon votre d\xe9partement"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Num\xe9ro de d\xe9partement"}),a.jsx("input",{type:"text",value:x.departement,onChange:e=>h({...x,departement:e.target.value}),placeholder:"Ex: 75 (Paris), 69 (Rh\xf4ne), 13 (Bouches-du-Rh\xf4ne)...",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-lg",autoFocus:!0})]}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-sm text-green-800",children:[a.jsx("strong",{children:"✅ C'est presque termin\xe9 !"})," Phoenix est maintenant pr\xeat \xe0 vous accompagner avec des r\xe9ponses personnalis\xe9es \xe0 votre situation."]})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-slate-200",children:[n>1?(0,a.jsxs)("button",{onClick:()=>i(n-1),className:"flex items-center space-x-2 px-4 py-2 text-slate-600 hover:text-slate-900 transition-colors",children:[a.jsx(Z,{className:"h-5 w-5"}),a.jsx("span",{children:"Retour"})]}):a.jsx("div",{}),n<4?(0,a.jsxs)("button",{onClick:()=>i(n+1),disabled:!N(),className:"flex items-center space-x-2 px-6 py-3 bg-rose-500 text-white rounded-lg hover:bg-rose-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("span",{children:"Continuer"}),a.jsx(k,{className:"h-5 w-5"})]}):a.jsx("button",{onClick:y,disabled:!N()||o,className:"flex items-center space-x-2 px-6 py-3 bg-rose-500 text-white rounded-lg hover:bg-rose-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,a.jsxs)(a.Fragment,{children:[a.jsx(d.Z,{className:"h-5 w-5 animate-spin"}),a.jsx("span",{children:"Finalisation..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{children:"Commencer"}),a.jsx(m,{className:"h-5 w-5"})]})})]})]})})})}var S=t(5460);function _(){let{user:e}=(0,g.K)(),s=(0,v.useRouter)(),[n,N]=(0,r.useState)(!1),[y,w]=(0,r.useState)("resume"),[k,P]=(0,r.useState)(null),[A,M]=(0,r.useState)(!1),[Z,_]=(0,r.useState)(!1),[E,z]=(0,r.useState)(!1),[R,T]=(0,r.useState)(!1),[H,$]=(0,r.useState)(!1),{aides:F,loading:B}=(0,f.fN)(),{documents:I,loading:U}=(0,f.GK)(),{deadlines:G,loading:V}=(0,f.hT)(),{profile:K,children:L,loading:Q}=(0,f.mH)(),J=e=>{let t=encodeURIComponent(e);s.push(`/chat?q=${t}`)},O=e=>{switch(e){case"actif":case"valide":return"text-green-600 bg-green-50";case"en_attente":case"expire_bientot":return"text-orange-600 bg-orange-50";case"refuse":case"expire":return"text-red-600 bg-red-50";default:return"text-slate-600 bg-slate-50"}},X=e=>{switch(e){case"haute":return"text-red-600 bg-red-50";case"moyenne":return"text-orange-600 bg-orange-50";case"basse":return"text-blue-600 bg-blue-50";default:return"text-slate-600 bg-slate-50"}},W=e=>{switch(e){case"renouvellement":return"\uD83D\uDD04";case"rdv":return"\uD83D\uDC65";case"demarche":return"\uD83D\uDCCB";default:return"\uD83D\uDCC5"}},Y=e=>{let s=new Date;return Math.ceil((new Date(e).getTime()-s.getTime())/864e5)},ee=e=>e<0?"text-red-700 bg-red-100":e<=7?"text-red-600 bg-red-50":e<=30?"text-orange-600 bg-orange-50":"text-slate-600 bg-slate-50",es=!B&&!U&&!F?.length&&!I?.length&&!G?.length,et=[{id:"resume",label:"R\xe9sum\xe9",icon:l.Z},{id:"aides",label:"Mes Aides",icon:i},{id:"documents",label:"Documents",icon:o.Z},{id:"planning",label:"Planning",icon:c}];return(Q||K||Z||_(!0),Q)?a.jsx("div",{className:"h-full bg-slate-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(d.Z,{className:"h-12 w-12 text-rose-500 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600",children:"Chargement de votre dossier..."})]})}):Z?a.jsx(q,{onComplete:()=>{_(!1),s.refresh()}}):(0,a.jsxs)("div",{className:"h-full bg-slate-50 overflow-auto",children:[(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-8 flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Mon Dossier Familial"}),(0,a.jsxs)("p",{className:"text-slate-600 mt-2",children:["Bienvenue ",e?.email||K?.name,", voici un aper\xe7u de votre situation"]})]}),(0,a.jsxs)("button",{onClick:()=>s.push("/profil"),className:"flex items-center space-x-2 px-4 py-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:[a.jsx(x,{className:"h-4 w-4 text-slate-600"}),a.jsx("span",{className:"text-slate-700 font-medium",children:"Mon Profil"})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("div",{className:"hidden md:flex space-x-1 bg-white rounded-xl p-1 shadow-sm",children:et.map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>w(e.id),className:`flex items-center space-x-2 px-4 py-3 rounded-lg font-medium transition-all duration-200 ${y===e.id?"bg-rose-500 text-white shadow-md":"text-slate-600 hover:bg-slate-100"}`,children:[a.jsx(s,{className:"h-5 w-5"}),a.jsx("span",{children:e.label})]},e.id)})}),a.jsx("div",{className:"md:hidden bg-white rounded-xl shadow-sm",children:a.jsx("select",{value:y,onChange:e=>w(e.target.value),className:"w-full px-4 py-3 rounded-xl border-0 font-medium text-slate-900 focus:ring-2 focus:ring-rose-500",children:et.map(e=>a.jsx("option",{value:e.id,children:e.label},e.id))})})]}),"resume"===y&&(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[es&&!H&&(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 via-rose-500 to-pink-500 rounded-2xl p-6 md:p-8 text-white shadow-xl animate-fadeIn",children:[(0,a.jsxs)("h2",{className:"text-2xl md:text-3xl font-bold mb-3",children:["\uD83D\uDC4B Bienvenue ",K?.name," !"]}),a.jsx("p",{className:"text-purple-50 mb-6",children:"Phoenix est pr\xeat \xe0 vous aider. Voici comment d\xe9marrer :"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-3 mb-4",children:[(0,a.jsxs)("button",{onClick:()=>s.push("/chat?q=Quelles aides puis-je demander pour mon enfant ?"),className:"bg-white/20 hover:bg-white/30 p-4 rounded-xl text-left transition-all duration-200 hover:scale-105 backdrop-blur-sm",children:[a.jsx("div",{className:"text-2xl mb-2",children:"\uD83D\uDCB0"}),a.jsx("div",{className:"font-semibold mb-1",children:"D\xe9couvrir mes aides"}),a.jsx("div",{className:"text-sm text-purple-100",children:"AEEH, PCH, AJPP..."})]}),(0,a.jsxs)("button",{onClick:()=>N(!0),className:"bg-white/20 hover:bg-white/30 p-4 rounded-xl text-left transition-all duration-200 hover:scale-105 backdrop-blur-sm",children:[a.jsx("div",{className:"text-2xl mb-2",children:"\uD83D\uDCC4"}),a.jsx("div",{className:"font-semibold mb-1",children:"Analyser un document"}),a.jsx("div",{className:"text-sm text-purple-100",children:"Notification MDPH..."})]}),(0,a.jsxs)("button",{onClick:()=>s.push("/chat"),className:"bg-white/20 hover:bg-white/30 p-4 rounded-xl text-left transition-all duration-200 hover:scale-105 backdrop-blur-sm",children:[a.jsx("div",{className:"text-2xl mb-2",children:"\uD83D\uDCAC"}),a.jsx("div",{className:"font-semibold mb-1",children:"Poser une question"}),a.jsx("div",{className:"text-sm text-purple-100",children:"Phoenix r\xe9pond \xe0 tout"})]})]}),a.jsx("button",{onClick:()=>$(!0),className:"text-white/80 hover:text-white text-sm underline transition-colors",children:"Masquer ce message"})]}),!es&&(F?.length>0||G?.length>0)&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-6 text-white shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[a.jsx(m,{className:"h-6 w-6 flex-shrink-0 mt-1"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"\uD83D\uDCCA Votre situation en un coup d'œil"}),A?(0,a.jsxs)("div",{className:"space-y-2 animate-pulse",children:[a.jsx("div",{className:"h-4 bg-white/20 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-white/20 rounded w-1/2"})]}):k?a.jsx("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4 text-sm prose prose-invert prose-sm max-w-none",children:a.jsx(S.UG,{children:k})}):(0,a.jsxs)("div",{className:"space-y-2 text-sm text-blue-50",children:[(0,a.jsxs)("p",{children:["✅ Vous avez ",F?.length||0," aide(s) active(s)"]}),G?.filter(e=>30>=Y(e.date)).length>0&&(0,a.jsxs)("p",{children:["⚠️ ",G.filter(e=>30>=Y(e.date)).length," \xe9ch\xe9ance(s) ce mois-ci"]})]})]})]}),a.jsx("button",{onClick:()=>s.push("/chat?q=Explique-moi ma situation en d\xe9tail"),className:"bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105",children:"\uD83D\uDCAC Discuter avec Phoenix"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm transition-all duration-200 hover:shadow-md",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"\uD83D\uDC68‍\uD83D\uDC69‍\uD83D\uDC67‍\uD83D\uDC66 Ma Famille"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(l.Z,{className:"h-5 w-5 text-slate-400"}),(0,a.jsxs)("span",{className:"text-slate-700",children:[K?.name||e?.email," - Parent r\xe9f\xe9rent"]})]}),L?.map((e,s)=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-lg",children:"\uD83D\uDC76"}),a.jsxs("span",{className:"text-slate-700",children:[e.name," (",e.age," ans",e.handicap_type?`, ${e.handicap_type}`:"",")"]})]},e.id)),K&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(u.Z,{className:"h-5 w-5 text-slate-400"}),(0,a.jsxs)("span",{className:"text-slate-500",children:["Situation: ",K.situation||"Non renseign\xe9",K.departement&&` • ${K.departement}`]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(C,{}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"\uD83D\uDEA8 Alertes"}),a.jsx("div",{className:"space-y-3",children:G?.filter(e=>7>=Y(e.date)).length>0?G.filter(e=>7>=Y(e.date)).map(e=>(0,a.jsxs)("div",{className:"flex items-start justify-between p-3 bg-orange-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx(h.Z,{className:"h-5 w-5 text-orange-600 mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-orange-800",children:e.titre}),a.jsx("p",{className:"text-xs text-orange-600",children:0===Y(e.date)?"Aujourd'hui":1===Y(e.date)?"Demain":`Dans ${Y(e.date)} jours`})]})]}),a.jsx("button",{onClick:()=>J(`Aide-moi pour : ${e.titre}`),className:"p-1 text-orange-600 hover:text-orange-800 hover:bg-orange-100 rounded transition-colors",title:"Demander aide \xe0 Phoenix",children:a.jsx(p.Z,{className:"h-4 w-4"})})]},e.id)):a.jsx("p",{className:"text-slate-500 text-sm",children:"Aucune alerte pour le moment ✅"})})]})]})]}),"aides"===y&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"\uD83D\uDCB0 Mes Aides et Allocations"}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[a.jsx("button",{onClick:()=>J("Quelles autres aides puis-je demander pour ma situation ?"),className:"px-4 py-2 border border-rose-500 text-rose-600 rounded-lg hover:bg-rose-50 transition-all duration-200",children:"\uD83D\uDCA1 D\xe9couvrir"}),a.jsx("button",{onClick:()=>z(!0),className:"bg-rose-500 text-white px-4 py-2 rounded-lg hover:bg-rose-600 transition-all duration-200 hover:scale-105",children:"+ Ajouter une aide"})]})]}),a.jsx("div",{className:"grid gap-4",children:B?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(d.Z,{className:"h-8 w-8 text-rose-500 animate-spin mx-auto mb-2"}),a.jsx("p",{className:"text-slate-600",children:"Chargement de vos aides..."})]}):F?.length>0?F.map(e=>a.jsx("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900",children:e.nom}),a.jsx("p",{className:"text-slate-600",children:e.montant}),e.echeance&&(0,a.jsxs)("p",{className:"text-xs text-orange-600 mt-1",children:["\xc9ch\xe9ance: ",new Date(e.echeance).toLocaleDateString("fr-FR")]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${O(e.statut)}`,children:e.statut.replace("_"," ")}),a.jsx("button",{onClick:()=>J(`Comment renouveler ou optimiser mon aide ${e.nom} ?`),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"Demander \xe0 Phoenix",children:a.jsx(p.Z,{className:"h-4 w-4"})})]})]})},e.id)):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-slate-600",children:"Aucune aide enregistr\xe9e pour le moment."}),a.jsx("button",{onClick:()=>J("Quelles aides puis-je demander pour ma situation familiale ?"),className:"mt-4 text-rose-600 hover:text-rose-700 font-medium",children:"D\xe9couvrir les aides disponibles"})]})})]}),"documents"===y&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"\uD83D\uDCC4 Mes Documents"}),a.jsx("button",{onClick:()=>N(!0),className:"bg-rose-500 text-white px-4 py-2 rounded-lg hover:bg-rose-600 transition-colors",children:"+ Ajouter document"})]}),a.jsx("div",{className:"grid gap-4",children:U?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(d.Z,{className:"h-8 w-8 text-rose-500 animate-spin mx-auto mb-2"}),a.jsx("p",{className:"text-slate-600",children:"Chargement de vos documents..."})]}):I?.length>0?I.map(e=>a.jsx("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[a.jsx(o.Z,{className:"h-5 w-5 text-slate-400 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900",children:e.nom}),(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:[e.type," • ",e.date]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${O(e.statut)}`,children:e.statut.replace("_"," ")}),a.jsx("button",{onClick:()=>J(`Peux-tu m'expliquer ce document ${e.nom} et me dire ce que je dois faire ?`),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"Analyser avec Phoenix",children:a.jsx(j,{className:"h-4 w-4"})})]})]})},e.id)):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-slate-600",children:"Aucun document pour le moment."}),a.jsx("button",{onClick:()=>N(!0),className:"mt-4 text-rose-600 hover:text-rose-700 font-medium",children:"Ajouter votre premier document"})]})})]}),"planning"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:a.jsx(h.Z,{className:"h-5 w-5 text-red-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Urgences"}),a.jsx("p",{className:"text-xl font-bold text-slate-900",children:G?.filter(e=>7>=Y(e.date)).length||0})]})]})}),a.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:a.jsx(b.Z,{className:"h-5 w-5 text-orange-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Ce mois-ci"}),a.jsx("p",{className:"text-xl font-bold text-slate-900",children:G?.filter(e=>30>=Y(e.date)&&Y(e.date)>0).length||0})]})]})}),a.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(c,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"\xc0 venir"}),a.jsx("p",{className:"text-xl font-bold text-slate-900",children:G?.filter(e=>Y(e.date)>30).length||0})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"\uD83D\uDCC5 Prochaines \xc9ch\xe9ances"}),a.jsx("button",{onClick:()=>T(!0),className:"bg-rose-500 text-white px-4 py-2 rounded-lg hover:bg-rose-600 transition-all duration-200 hover:scale-105",children:"+ Ajouter \xe9ch\xe9ance"})]}),a.jsx("div",{className:"space-y-3",children:V?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(d.Z,{className:"h-8 w-8 text-rose-500 animate-spin mx-auto mb-2"}),a.jsx("p",{className:"text-slate-600",children:"Chargement de vos \xe9ch\xe9ances..."})]}):G?.length>0?G.sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime()).map(e=>{let s=Y(e.date);return a.jsx("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4 flex-1",children:[a.jsx("span",{className:"text-2xl",children:W(e.type)}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900",children:e.titre}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[a.jsx("p",{className:"text-sm text-slate-600",children:new Date(e.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${X(e.priorite)}`,children:e.priorite})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ee(s)}`,children:s<0?`Pass\xe9 de ${Math.abs(s)} jour${Math.abs(s)>1?"s":""}`:0===s?"Aujourd'hui":1===s?"Demain":`Dans ${s} jours`}),a.jsx("button",{onClick:()=>J(`Comment pr\xe9parer et r\xe9ussir : ${e.titre} ? Quels documents et d\xe9marches ?`),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"Aide de Phoenix",children:a.jsx(p.Z,{className:"h-4 w-4"})})]})]})},e.id)}):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-slate-600",children:"Aucune \xe9ch\xe9ance programm\xe9e."}),a.jsx("button",{onClick:()=>J("Quelles sont les d\xe9marches importantes \xe0 pr\xe9voir pour ma situation ?"),className:"mt-4 text-rose-600 hover:text-rose-700 font-medium",children:"Planifier mes prochaines d\xe9marches"})]})})]})]})]}),E&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"\uD83D\uDCB0 Ajouter une aide"}),a.jsx("button",{onClick:()=>z(!1),className:"text-slate-400 hover:text-slate-600 text-2xl leading-none",children:"\xd7"})]}),(0,a.jsxs)("form",{onSubmit:async a=>{a.preventDefault();let r=new FormData(a.currentTarget),l=r.get("nom"),n=r.get("montant"),i=r.get("statut"),o=r.get("echeance");try{let{supabase:a}=await Promise.resolve().then(t.bind(t,24)),{error:r}=await a.from("user_aides").insert([{user_id:e?.id,nom:l,montant:n,statut:i,echeance:o||null}]);if(r)throw r;z(!1),s.refresh()}catch(e){console.error("Erreur ajout aide:",e),alert("Erreur lors de l&apos;ajout de l&apos;aide")}},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nom de l'aide *"}),a.jsx("input",{type:"text",name:"nom",placeholder:"Ex: AEEH Base, PCH, AAH...",required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Montant"}),a.jsx("input",{type:"text",name:"montant",placeholder:"Ex: 142€/mois, 1200€/an...",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Statut *"}),(0,a.jsxs)("select",{name:"statut",required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"actif",children:"✅ Actif"}),a.jsx("option",{value:"en_attente",children:"⏳ En attente"}),a.jsx("option",{value:"refuse",children:"❌ Refus\xe9"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Date d'\xe9ch\xe9ance (optionnel)"}),a.jsx("input",{type:"date",name:"echeance",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>z(!1),className:"flex-1 px-4 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-all",children:"Annuler"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-rose-500 text-white rounded-lg hover:bg-rose-600 transition-all font-medium",children:"Ajouter l'aide"})]})]})]})}),R&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"\uD83D\uDCC5 Ajouter une \xe9ch\xe9ance"}),a.jsx("button",{onClick:()=>T(!1),className:"text-slate-400 hover:text-slate-600 text-2xl leading-none",children:"\xd7"})]}),(0,a.jsxs)("form",{onSubmit:async a=>{a.preventDefault();let r=new FormData(a.currentTarget),l=r.get("titre"),n=r.get("date"),i=r.get("type"),o=r.get("priorite");try{let{supabase:a}=await Promise.resolve().then(t.bind(t,24)),{error:r}=await a.from("user_deadlines").insert([{user_id:e?.id,titre:l,date:n,type:i,priorite:o}]);if(r)throw r;T(!1),s.refresh()}catch(e){console.error("Erreur ajout \xe9ch\xe9ance:",e),alert("Erreur lors de l&apos;ajout de l&apos;\xe9ch\xe9ance")}},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Titre *"}),a.jsx("input",{type:"text",name:"titre",placeholder:"Ex: RDV MDPH, Renouvellement AEEH...",required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Date *"}),a.jsx("input",{type:"date",name:"date",required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Type *"}),(0,a.jsxs)("select",{name:"type",required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"rdv",children:"\uD83D\uDC65 Rendez-vous"}),a.jsx("option",{value:"renouvellement",children:"\uD83D\uDD04 Renouvellement"}),a.jsx("option",{value:"demarche",children:"\uD83D\uDCCB D\xe9marche administrative"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Priorit\xe9 *"}),(0,a.jsxs)("select",{name:"priorite",required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"haute",children:"\uD83D\uDD34 Haute"}),a.jsx("option",{value:"moyenne",children:"\uD83D\uDFE1 Moyenne"}),a.jsx("option",{value:"basse",children:"\uD83D\uDD35 Basse"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>T(!1),className:"flex-1 px-4 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-all",children:"Annuler"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-rose-500 text-white rounded-lg hover:bg-rose-600 transition-all font-medium",children:"Cr\xe9er l'\xe9ch\xe9ance"})]})]})]})}),n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full max-h-96 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Analyser un document"}),a.jsx("button",{onClick:()=>N(!1),className:"text-slate-400 hover:text-slate-600",children:"✕"})]}),a.jsx(D,{onDocumentAnalyzed:e=>{N(!1)},userId:e?.id||""})]})})]})}},6614:(e,s,t)=>{"use strict";t.d(s,{GK:()=>n,fN:()=>l,hT:()=>i,mH:()=>o});var a=t(5507);t(24);var r=t(1955);function l(){let{user:e}=(0,r.K)(),[s,t]=(0,a.useState)([]),[l,n]=(0,a.useState)(!0),[i,o]=(0,a.useState)(null);return{aides:s,loading:l,error:i}}function n(){let{user:e}=(0,r.K)(),[s,t]=(0,a.useState)([]),[l,n]=(0,a.useState)(!0),[i,o]=(0,a.useState)(null);return{documents:s,loading:l,error:i}}function i(){let{user:e}=(0,r.K)(),[s,t]=(0,a.useState)([]),[l,n]=(0,a.useState)(!0),[i,o]=(0,a.useState)(null);return{deadlines:s,loading:l,error:i}}function o(){let{user:e}=(0,r.K)(),[s,t]=(0,a.useState)(null),[l,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null);return{profile:s,children:l,loading:i,error:c}}},2070:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1278).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},433:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1278).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4342:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1278).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},1614:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1278).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7657:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1278).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},5691:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(2772).createProxy)(String.raw`/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/dashboard/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[942,237,696,496,838],()=>t(4598));module.exports=a})();