(()=>{var e={};e.id=4,e.ids=[4],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},9411:e=>{"use strict";e.exports=require("node:path")},7742:e=>{"use strict";e.exports=require("node:process")},1041:e=>{"use strict";e.exports=require("node:url")},4598:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>o}),t(5691),t(5474),t(2874),t(1163);var a=t(7105),r=t(5265),l=t(157),n=t.n(l),i=t(4665),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let o=["",{children:["(protected)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5691)),"/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5474)),"/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2874,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1163)),"/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/dashboard/page.tsx"],x="/(protected)/dashboard/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(protected)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9635:(e,s,t)=>{Promise.resolve().then(t.bind(t,2043))},8306:(e,s,t)=>{Promise.resolve().then(t.bind(t,5712))},4533:(e,s,t)=>{Promise.resolve().then(t.bind(t,2341))},8067:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,3817,23)),Promise.resolve().then(t.t.bind(t,9323,23)),Promise.resolve().then(t.t.bind(t,2204,23)),Promise.resolve().then(t.t.bind(t,820,23)),Promise.resolve().then(t.t.bind(t,5915,23)),Promise.resolve().then(t.t.bind(t,1611,23))},2043:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var a=t(9899),r=t(5507),l=t(1614),n=t(1278);let i=(0,n.Z)("euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);var c=t(9587);let o=(0,n.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var d=t(2979);let x=(0,n.Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),m=(0,n.Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var u=t(3228),h=t(4767);let p=(0,n.Z)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),j=(0,n.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var g=t(1955),v=t(6614),b=t(6153);let f=(0,n.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),N=(0,n.Z)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var y=t(8954);function w({onDocumentAnalyzed:e,userId:s}){let[t,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null),[o,x]=(0,r.useState)(null),m=(0,r.useRef)(null),h=async t=>{if(t){if(!["image/jpeg","image/png","image/webp","application/pdf","text/plain"].includes(t.type)){i("Type de fichier non support\xe9. Utilisez JPG, PNG, PDF ou TXT.");return}if(t.size>5242880){i("Le fichier est trop volumineux. Maximum 5MB.");return}l(!0),i(null),x(null);try{let a=new FileReader;a.onload=async a=>{let r=a.target?.result,l=t.type.includes("image")?"scan":t.type.includes("pdf")?"pdf":"text",n=await fetch("/api/chat/analyze-document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document:r,userId:s,documentType:l,fileName:t.name})});if(!n.ok)throw Error("Erreur lors de l'analyse du document");let i=await n.json();x("Document analys\xe9 avec succ\xe8s !"),e(i.analysis||i.fullAnalysis)},a.readAsDataURL(t)}catch(e){console.error("Erreur analyse document:",e),i(e.message||"Erreur lors de l'analyse du document")}finally{l(!1)}}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{onDrop:e=>{e.preventDefault();let s=Array.from(e.dataTransfer.files);s.length>0&&h(s[0])},onDragOver:e=>{e.preventDefault()},className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-rose-400 transition-colors cursor-pointer",onClick:()=>m.current?.click(),children:[a.jsx("input",{ref:m,type:"file",accept:".jpg,.jpeg,.png,.webp,.pdf,.txt",onChange:e=>e.target.files?.[0]&&h(e.target.files[0]),className:"hidden"}),t?(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(d.Z,{className:"h-12 w-12 text-rose-500 animate-spin mx-auto"}),a.jsx("p",{className:"text-slate-600",children:"Phoenix analyse votre document..."})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[a.jsx(f,{className:"h-8 w-8 text-slate-400"}),a.jsx(c.Z,{className:"h-8 w-8 text-slate-400"}),a.jsx(N,{className:"h-8 w-8 text-slate-400"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-slate-700 font-medium",children:"Glissez votre document ici ou cliquez pour choisir"}),a.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Notification MDPH, certificat m\xe9dical, courrier CAF..."}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"JPG, PNG, PDF, TXT • Max 5MB"})]})]})]}),n&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[a.jsx(u.Z,{className:"h-5 w-5 flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:n})]}),o&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-green-600 bg-green-50 p-3 rounded-lg",children:[a.jsx(y.Z,{className:"h-5 w-5 flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:o})]}),(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:[a.jsx("p",{className:"font-medium mb-2",children:"Phoenix peut analyser :"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[a.jsx("li",{children:"• Notifications et d\xe9cisions MDPH"}),a.jsx("li",{children:"• Certificats m\xe9dicaux et bilans"}),a.jsx("li",{children:"• Courriers CAF et organismes"}),a.jsx("li",{children:"• Formulaires de demande d'aides"}),a.jsx("li",{children:"• Documents scolaires (PPS, PAI...)"})]})]})]})}let D=(0,n.Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function k(){let[e,s]=(0,r.useState)(null),t=[{id:"document-analysis",title:"Upload → Analyse → Dashboard",description:"Document analys\xe9 automatiquement et ajout\xe9 au dossier",steps:[{icon:c.Z,text:"Upload document",color:"bg-blue-100 text-blue-600"},{icon:x,text:"Analyse Phoenix",color:"bg-purple-100 text-purple-600"},{icon:o,text:"\xc9ch\xe9ances d\xe9tect\xe9es",color:"bg-orange-100 text-orange-600"},{icon:i,text:"Droits identifi\xe9s",color:"bg-green-100 text-green-600"}]},{id:"contextual-help",title:"Dashboard → Questions contextuelles",description:"Chaque \xe9l\xe9ment du dashboard connect\xe9 \xe0 Phoenix",steps:[{icon:i,text:"Aide AEEH",color:"bg-green-100 text-green-600"},{icon:h.Z,text:"Comment renouveler ?",color:"bg-rose-100 text-rose-600"},{icon:x,text:"R\xe9ponse personnalis\xe9e",color:"bg-purple-100 text-purple-600"}]},{id:"proactive-suggestions",title:"Syst\xe8me proactif intelligent",description:"Phoenix anticipe vos besoins selon votre profil",steps:[{icon:o,text:"\xc9ch\xe9ance d\xe9tect\xe9e",color:"bg-orange-100 text-orange-600"},{icon:x,text:"Alerte Phoenix",color:"bg-purple-100 text-purple-600"},{icon:h.Z,text:"Guidance automatique",color:"bg-rose-100 text-rose-600"}]}];return(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"\uD83D\uDD17 \xc9cosyst\xe8me Interconnect\xe9"}),a.jsx("div",{className:"space-y-4",children:t.map(t=>(0,a.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsx("button",{onClick:()=>s(e===t.id?null:t.id),className:"w-full text-left",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-slate-900",children:t.title}),a.jsx("p",{className:"text-sm text-slate-600",children:t.description})]}),a.jsx(D,{className:`h-5 w-5 text-slate-400 transition-transform ${e===t.id?"rotate-90":""}`})]})}),e===t.id&&a.jsx("div",{className:"mt-4 flex items-center space-x-2 overflow-x-auto pb-2",children:t.steps.map((e,s)=>{let r=e.icon;return(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[a.jsx("div",{className:`p-2 rounded-lg ${e.color}`,children:a.jsx(r,{className:"h-4 w-4"})}),a.jsx("span",{className:"text-sm font-medium text-slate-700 whitespace-nowrap",children:e.text}),s<t.steps.length-1&&a.jsx(D,{className:"h-4 w-4 text-slate-300 mx-2"})]},s)})})]},t.id))}),a.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-rose-50 to-purple-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx(x,{className:"h-5 w-5 text-purple-600 mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-slate-900",children:"Intelligence contextuelle"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Phoenix conna\xeet votre famille, vos aides actuelles et vos \xe9ch\xe9ances pour des r\xe9ponses ultra-personnalis\xe9es."})]})]})})]})}var P=t(5460);function C(){let{user:e}=(0,g.K)(),s=(0,b.useRouter)(),[n,f]=(0,r.useState)(!1),[N,y]=(0,r.useState)("resume"),[D,C]=(0,r.useState)(null),[A,S]=(0,r.useState)(!1),{aides:Z,loading:M}=(0,v.fN)(),{documents:I,loading:q}=(0,v.GK)(),{deadlines:_,loading:z}=(0,v.hT)(),{profile:T,children:E,loading:$}=(0,v.mH)(),F=e=>{let t=encodeURIComponent(e);s.push(`/chat?q=${t}`)},G=e=>{switch(e){case"actif":case"valide":return"text-green-600 bg-green-50";case"en_attente":case"expire_bientot":return"text-orange-600 bg-orange-50";case"refuse":case"expire":return"text-red-600 bg-red-50";default:return"text-slate-600 bg-slate-50"}},U=e=>{switch(e){case"haute":return"text-red-600 bg-red-50";case"moyenne":return"text-orange-600 bg-orange-50";case"basse":return"text-blue-600 bg-blue-50";default:return"text-slate-600 bg-slate-50"}},R=e=>{switch(e){case"renouvellement":return"\uD83D\uDD04";case"rdv":return"\uD83D\uDC65";case"demarche":return"\uD83D\uDCCB";default:return"\uD83D\uDCC5"}},H=e=>{let s=new Date;return Math.ceil((new Date(e).getTime()-s.getTime())/864e5)},J=e=>e<0?"text-red-700 bg-red-100":e<=7?"text-red-600 bg-red-50":e<=30?"text-orange-600 bg-orange-50":"text-slate-600 bg-slate-50",O=async()=>{S(!0);try{let{supabase:s}=await Promise.resolve().then(t.bind(t,24)),{data:{session:a}}=await s.auth.getSession(),r=a?.access_token;if(!r)throw Error("Session expir\xe9e");let l=await fetch("http://localhost:8000/api/summary/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({user_id:e?.id,context:{aides:Z,deadlines:_,documents:I,profile:T}})});if(!l.ok)throw Error("Erreur g\xe9n\xe9ration r\xe9sum\xe9");let n=await l.json();C(n.summary)}catch(e){console.error("Erreur:",e),C("❌ Impossible de g\xe9n\xe9rer le r\xe9sum\xe9. R\xe9essayez plus tard.")}finally{S(!1)}},K=[{id:"resume",label:"R\xe9sum\xe9",icon:l.Z},{id:"aides",label:"Mes Aides",icon:i},{id:"documents",label:"Documents",icon:c.Z},{id:"planning",label:"Planning",icon:o}];return $?a.jsx("div",{className:"h-full bg-slate-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(d.Z,{className:"h-12 w-12 text-rose-500 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600",children:"Chargement de votre dossier..."})]})}):(0,a.jsxs)("div",{className:"h-full bg-slate-50 overflow-auto",children:[(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Mon Dossier Familial"}),(0,a.jsxs)("p",{className:"text-slate-600 mt-2",children:["Bienvenue ",e?.email||T?.name,", voici un aper\xe7u de votre situation"]})]}),a.jsx("div",{className:"flex space-x-1 mb-8 bg-white rounded-xl p-1 shadow-sm",children:K.map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>y(e.id),className:`flex items-center space-x-2 px-4 py-3 rounded-lg font-medium transition-colors ${N===e.id?"bg-rose-500 text-white":"text-slate-600 hover:bg-slate-100"}`,children:[a.jsx(s,{className:"h-5 w-5"}),a.jsx("span",{children:e.label})]},e.id)})}),"resume"===N&&(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-rose-500 to-pink-600 rounded-xl p-6 shadow-lg text-white",children:[a.jsx("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(x,{className:"h-6 w-6"}),a.jsx("h3",{className:"text-xl font-bold",children:"R\xe9sum\xe9 Intelligent Phoenix"})]}),a.jsx("p",{className:"text-rose-100 text-sm mb-4",children:"G\xe9n\xe9rez un r\xe9sum\xe9 personnalis\xe9 de votre situation avec des recommandations d'actions."}),a.jsx("button",{onClick:O,disabled:A,className:"bg-white text-rose-600 px-6 py-2 rounded-lg font-medium hover:bg-rose-50 transition-colors disabled:opacity-50 flex items-center gap-2",children:A?(0,a.jsxs)(a.Fragment,{children:[a.jsx(d.Z,{className:"h-4 w-4 animate-spin"}),"G\xe9n\xe9ration en cours..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(x,{className:"h-4 w-4"}),"G\xe9n\xe9rer mon r\xe9sum\xe9"]})})]})}),D&&a.jsx("div",{className:"mt-4 pt-4 border-t border-rose-400",children:a.jsx("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4 text-white prose prose-invert prose-sm max-w-none",children:a.jsx(P.UG,{children:D})})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"\uD83D\uDC68‍\uD83D\uDC69‍\uD83D\uDC67‍\uD83D\uDC66 Ma Famille"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(l.Z,{className:"h-5 w-5 text-slate-400"}),(0,a.jsxs)("span",{className:"text-slate-700",children:[T?.name||e?.email," - Parent r\xe9f\xe9rent"]})]}),E?.map((e,s)=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-lg",children:"\uD83D\uDC76"}),a.jsxs("span",{className:"text-slate-700",children:[e.name," (",e.age," ans",e.handicap_type?`, ${e.handicap_type}`:"",")"]})]},e.id)),T&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(m,{className:"h-5 w-5 text-slate-400"}),(0,a.jsxs)("span",{className:"text-slate-500",children:["Situation: ",T.situation||"Non renseign\xe9",T.departement&&` • ${T.departement}`]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(k,{}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"\uD83D\uDEA8 Alertes"}),a.jsx("div",{className:"space-y-3",children:_?.filter(e=>7>=H(e.date)).length>0?_.filter(e=>7>=H(e.date)).map(e=>(0,a.jsxs)("div",{className:"flex items-start justify-between p-3 bg-orange-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx(u.Z,{className:"h-5 w-5 text-orange-600 mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-orange-800",children:e.titre}),a.jsx("p",{className:"text-xs text-orange-600",children:0===H(e.date)?"Aujourd'hui":1===H(e.date)?"Demain":`Dans ${H(e.date)} jours`})]})]}),a.jsx("button",{onClick:()=>F(`Aide-moi pour : ${e.titre}`),className:"p-1 text-orange-600 hover:text-orange-800 hover:bg-orange-100 rounded transition-colors",title:"Demander aide \xe0 Phoenix",children:a.jsx(h.Z,{className:"h-4 w-4"})})]},e.id)):a.jsx("p",{className:"text-slate-500 text-sm",children:"Aucune alerte pour le moment ✅"})})]})]})]}),"aides"===N&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"\uD83D\uDCB0 Mes Aides et Allocations"}),a.jsx("button",{onClick:()=>F("Quelles autres aides puis-je demander pour ma situation ?"),className:"bg-rose-500 text-white px-4 py-2 rounded-lg hover:bg-rose-600 transition-colors",children:"+ D\xe9couvrir d'autres aides"})]}),a.jsx("div",{className:"grid gap-4",children:M?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(d.Z,{className:"h-8 w-8 text-rose-500 animate-spin mx-auto mb-2"}),a.jsx("p",{className:"text-slate-600",children:"Chargement de vos aides..."})]}):Z?.length>0?Z.map(e=>a.jsx("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900",children:e.nom}),a.jsx("p",{className:"text-slate-600",children:e.montant}),e.echeance&&(0,a.jsxs)("p",{className:"text-xs text-orange-600 mt-1",children:["\xc9ch\xe9ance: ",new Date(e.echeance).toLocaleDateString("fr-FR")]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${G(e.statut)}`,children:e.statut.replace("_"," ")}),a.jsx("button",{onClick:()=>F(`Comment renouveler ou optimiser mon aide ${e.nom} ?`),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"Demander \xe0 Phoenix",children:a.jsx(h.Z,{className:"h-4 w-4"})})]})]})},e.id)):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-slate-600",children:"Aucune aide enregistr\xe9e pour le moment."}),a.jsx("button",{onClick:()=>F("Quelles aides puis-je demander pour ma situation familiale ?"),className:"mt-4 text-rose-600 hover:text-rose-700 font-medium",children:"D\xe9couvrir les aides disponibles"})]})})]}),"documents"===N&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"\uD83D\uDCC4 Mes Documents"}),a.jsx("button",{onClick:()=>f(!0),className:"bg-rose-500 text-white px-4 py-2 rounded-lg hover:bg-rose-600 transition-colors",children:"+ Ajouter document"})]}),a.jsx("div",{className:"grid gap-4",children:q?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(d.Z,{className:"h-8 w-8 text-rose-500 animate-spin mx-auto mb-2"}),a.jsx("p",{className:"text-slate-600",children:"Chargement de vos documents..."})]}):I?.length>0?I.map(e=>a.jsx("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[a.jsx(c.Z,{className:"h-5 w-5 text-slate-400 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900",children:e.nom}),(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:[e.type," • ",e.date]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${G(e.statut)}`,children:e.statut.replace("_"," ")}),a.jsx("button",{onClick:()=>F(`Peux-tu m'expliquer ce document ${e.nom} et me dire ce que je dois faire ?`),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"Analyser avec Phoenix",children:a.jsx(p,{className:"h-4 w-4"})})]})]})},e.id)):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-slate-600",children:"Aucun document pour le moment."}),a.jsx("button",{onClick:()=>f(!0),className:"mt-4 text-rose-600 hover:text-rose-700 font-medium",children:"Ajouter votre premier document"})]})})]}),"planning"===N&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:a.jsx(u.Z,{className:"h-5 w-5 text-red-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Urgences"}),a.jsx("p",{className:"text-xl font-bold text-slate-900",children:_?.filter(e=>7>=H(e.date)).length||0})]})]})}),a.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:a.jsx(j,{className:"h-5 w-5 text-orange-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Ce mois-ci"}),a.jsx("p",{className:"text-xl font-bold text-slate-900",children:_?.filter(e=>30>=H(e.date)&&H(e.date)>0).length||0})]})]})}),a.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(o,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"\xc0 venir"}),a.jsx("p",{className:"text-xl font-bold text-slate-900",children:_?.filter(e=>H(e.date)>30).length||0})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"\uD83D\uDCC5 Prochaines \xc9ch\xe9ances"}),a.jsx("button",{onClick:()=>F("Quelles sont les prochaines d\xe9marches importantes \xe0 pr\xe9voir ?"),className:"bg-rose-500 text-white px-4 py-2 rounded-lg hover:bg-rose-600 transition-colors",children:"+ Ajouter \xe9ch\xe9ance"})]}),a.jsx("div",{className:"space-y-3",children:z?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(d.Z,{className:"h-8 w-8 text-rose-500 animate-spin mx-auto mb-2"}),a.jsx("p",{className:"text-slate-600",children:"Chargement de vos \xe9ch\xe9ances..."})]}):_?.length>0?_.sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime()).map(e=>{let s=H(e.date);return a.jsx("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4 flex-1",children:[a.jsx("span",{className:"text-2xl",children:R(e.type)}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900",children:e.titre}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[a.jsx("p",{className:"text-sm text-slate-600",children:new Date(e.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U(e.priorite)}`,children:e.priorite})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${J(s)}`,children:s<0?`Pass\xe9 de ${Math.abs(s)} jour${Math.abs(s)>1?"s":""}`:0===s?"Aujourd'hui":1===s?"Demain":`Dans ${s} jours`}),a.jsx("button",{onClick:()=>F(`Comment pr\xe9parer et r\xe9ussir : ${e.titre} ? Quels documents et d\xe9marches ?`),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"Aide de Phoenix",children:a.jsx(h.Z,{className:"h-4 w-4"})})]})]})},e.id)}):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-slate-600",children:"Aucune \xe9ch\xe9ance programm\xe9e."}),a.jsx("button",{onClick:()=>F("Quelles sont les d\xe9marches importantes \xe0 pr\xe9voir pour ma situation ?"),className:"mt-4 text-rose-600 hover:text-rose-700 font-medium",children:"Planifier mes prochaines d\xe9marches"})]})})]})]})]}),n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full max-h-96 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Analyser un document"}),a.jsx("button",{onClick:()=>f(!1),className:"text-slate-400 hover:text-slate-600",children:"✕"})]}),a.jsx(w,{onDocumentAnalyzed:e=>{f(!1)},userId:e?.id||""})]})})]})}},5712:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(9899),r=t(5507),l=t(4175),n=t(6153),i=t(7866),c=t(4767),o=t(4941),d=t(7282),x=t(1955),m=t(8449);function u(){let[e,s]=(0,r.useState)(!0);return e?a.jsx("div",{className:"bg-gradient-to-r from-rose-50 to-pink-50 border-b border-rose-100",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(i.Z,{className:"h-5 w-5 text-rose-500 flex-shrink-0"}),(0,a.jsxs)("p",{className:"text-sm text-slate-700",children:[a.jsx("span",{className:"font-medium",children:"Phoenix est gratuit"})," gr\xe2ce \xe0 la g\xe9n\xe9rosit\xe9 de familles comme vous.",a.jsx(l.default,{href:"/soutenir",className:"text-rose-600 hover:text-rose-700 ml-2 underline",children:"D\xe9couvrir comment soutenir →"})]})]}),a.jsx("button",{onClick:()=>s(!1),className:"text-slate-400 hover:text-slate-600 p-1","aria-label":"Fermer",children:a.jsx(m.Z,{className:"h-4 w-4"})})]})}):null}let h=({href:e,children:s})=>{let t=(0,n.usePathname)()===e;return a.jsx(l.default,{href:e,className:`flex items-center px-3 py-2 rounded-lg transition-colors ${t?"bg-rose-100 text-rose-700":"text-slate-600 hover:bg-slate-100"}`,children:s})};function p({children:e}){let{user:s,signOut:t,loading:r}=(0,x.K)();return((0,n.useRouter)(),r||!s)?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:a.jsx(i.Z,{className:"h-12 w-12 text-rose-500 animate-pulse"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 flex",children:[(0,a.jsxs)("aside",{className:"w-64 bg-white border-r border-slate-200 p-4 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-8",children:[a.jsx(i.Z,{className:"h-8 w-8 text-rose-500"}),a.jsx("span",{className:"text-xl font-semibold text-slate-900",children:"PhoenixCare"})]}),(0,a.jsxs)("nav",{className:"flex flex-col space-y-2",children:[(0,a.jsxs)(h,{href:"/chat",children:[a.jsx(c.Z,{className:"mr-3 h-5 w-5"}),"Assistant"]}),(0,a.jsxs)(h,{href:"/dashboard",children:[a.jsx(o.Z,{className:"mr-3 h-5 w-5"}),"Mon Dossier"]})]}),a.jsx("div",{className:"mt-auto",children:(0,a.jsxs)("div",{className:"border-t border-slate-200 pt-4",children:[a.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:s?.user_metadata?.name||"Utilisateur"}),a.jsx("p",{className:"text-xs text-slate-500 truncate",children:s?.email}),(0,a.jsxs)("button",{onClick:t,className:"w-full flex items-center mt-4 px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100 transition-colors",children:[a.jsx(d.Z,{className:"mr-3 h-5 w-5"}),"Se d\xe9connecter"]})]})})]}),(0,a.jsxs)("main",{className:"flex-1 flex flex-col",children:[a.jsx(u,{}),a.jsx("div",{className:"flex-1",children:e})]})]})}},2341:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(9899);t(5599);var r=t(1955);function l({children:e}){return a.jsx(r.H,{children:e})}function n({children:e}){return a.jsx("html",{lang:"fr",children:a.jsx("body",{children:a.jsx(l,{children:e})})})}},1955:(e,s,t)=>{"use strict";t.d(s,{H:()=>i,K:()=>c});var a=t(9899),r=t(5507),l=t(24);let n=(0,r.createContext)(void 0);function i({children:e}){let[s,t]=(0,r.useState)(null),[i,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0),x=async(e,s,t)=>{let{data:a,error:r}=await l.supabase.auth.signUp({email:e,password:s,options:{data:{name:t}}});return{data:a,error:r}},m=async(e,s)=>{let{data:t,error:a}=await l.supabase.auth.signInWithPassword({email:e,password:s});return{data:t,error:a}},u=async()=>{await l.supabase.auth.signOut()},h=async e=>{let{data:s,error:t}=await l.supabase.auth.resetPasswordForEmail(e);return{data:s,error:t}};return a.jsx(n.Provider,{value:{user:s,session:i,loading:o,signUp:x,signIn:m,signOut:u,resetPassword:h},children:e})}function c(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useSupabaseAuth must be used within an AuthProvider");return e}},6614:(e,s,t)=>{"use strict";t.d(s,{GK:()=>n,fN:()=>l,hT:()=>i,mH:()=>c});var a=t(5507);t(24);var r=t(1955);function l(){let{user:e}=(0,r.K)(),[s,t]=(0,a.useState)([]),[l,n]=(0,a.useState)(!0),[i,c]=(0,a.useState)(null);return{aides:s,loading:l,error:i}}function n(){let{user:e}=(0,r.K)(),[s,t]=(0,a.useState)([]),[l,n]=(0,a.useState)(!0),[i,c]=(0,a.useState)(null);return{documents:s,loading:l,error:i}}function i(){let{user:e}=(0,r.K)(),[s,t]=(0,a.useState)([]),[l,n]=(0,a.useState)(!0),[i,c]=(0,a.useState)(null);return{deadlines:s,loading:l,error:i}}function c(){let{user:e}=(0,r.K)(),[s,t]=(0,a.useState)(null),[l,n]=(0,a.useState)([]),[i,c]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null);return{profile:s,children:l,loading:i,error:o}}},24:(e,s,t)=>{"use strict";t.d(s,{supabase:()=>n});var a=t(6873);let r="https://gvginoszwaccifrtackh.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd2Z2lub3N6d2FjY2lmcnRhY2toIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxMjQyNzgsImV4cCI6MjA3NDcwMDI3OH0.sbuGET5VLfo0VjwVugc_ix1F_b0ntqDVmrqckdP22ss";if(!r||!l)throw Error("Missing Supabase environment variables");let n=(0,a.eI)(r,l,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce",storage:{getItem:e=>null,setItem:(e,s)=>{},removeItem:e=>{}}}})},1614:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1278).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5691:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(2772).createProxy)(String.raw`/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/dashboard/page.tsx#default`)},5474:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(2772).createProxy)(String.raw`/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/layout.tsx#default`)},1163:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(2772).createProxy)(String.raw`/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/layout.tsx#default`)},5599:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[942,998,696,213],()=>t(4598));module.exports=a})();