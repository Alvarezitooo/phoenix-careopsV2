(()=>{var e={};e.id=619,e.ids=[619],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},9411:e=>{"use strict";e.exports=require("node:path")},7742:e=>{"use strict";e.exports=require("node:process")},1041:e=>{"use strict";e.exports=require("node:url")},7214:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),s(9290),s(5474),s(2874),s(1163);var r=s(7105),a=s(5265),n=s(157),o=s.n(n),i=s(4665),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let c=["",{children:["(protected)",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9290)),"/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/chat/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5474)),"/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,2874,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,1163)),"/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,2874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/chat/page.tsx"],u="/(protected)/chat/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(protected)/chat/page",pathname:"/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4669:(e,t,s)=>{Promise.resolve().then(s.bind(s,7323))},7323:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var r=s(9899),a=s(5507),n=s(7866),o=s(8954),i=s(2979),l=s(3228),c=s(1278);let d=(0,c.Z)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var u=s(9587);let m=(0,c.Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var h=s(5460),x=s(2837);async function p(e){if(e.response)try{let t=await e.response.json(),s=t.error?.code;if(s&&x.P.errors[s])return x.P.errors[s]}catch(e){return x.P.errors.UNKNOWN_ERROR}return e.message&&e.message.includes("Failed to fetch")?x.P.errors.network:x.P.errors.UNKNOWN_ERROR}var g=s(24);class f{async getAuthToken(){let{data:{session:e}}=await g.supabase.auth.getSession();if(!e?.access_token)throw Error("Utilisateur non authentifi\xe9. Veuillez vous reconnecter.");return e.access_token}async getAuthHeaders(){let e=await this.getAuthToken();return{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}async sendMessage(e,t){let s=await fetch(`${this.baseUrl}/message`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({message:e,userId:t})});if(!s.ok)throw Error(`Erreur ${s.status}: ${s.statusText}`);return s.json()}async getChatHistory(e){let t=await fetch(`${this.baseUrl}/history?userId=${e}`,{headers:await this.getAuthHeaders()});if(!t.ok)throw Error(`Erreur ${t.status}: ${t.statusText}`);return t.json()}async saveMemory(e,t,s="general"){let r=await fetch(`${this.baseUrl}/memory`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({userId:e,memory:t,type:s})});if(!r.ok)throw Error(`Erreur ${r.status}: ${r.statusText}`);return r.json()}async resetConversation(e){let t=await fetch(`${this.baseUrl}/reset`,{method:"DELETE",headers:await this.getAuthHeaders(),body:JSON.stringify({userId:e})});if(!t.ok)throw Error(`Erreur ${t.status}: ${t.statusText}`);return t.json()}async analyzeDocument(e,t,s="other"){let r=await fetch(`${this.baseUrl}/analyze-document`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({document:e,userId:t,documentType:s})});if(!r.ok)throw Error(`Erreur ${r.status}: ${r.statusText}`);return r.json()}async getUserMemory(e){let t=await fetch(`${this.baseUrl}/memory/${e}`,{headers:await this.getAuthHeaders()});if(!t.ok)throw Error(`Erreur ${t.status}: ${t.statusText}`);return t.json()}async updateUserMemory(e,t){let s=await fetch(`${this.baseUrl}/memory/${e}`,{method:"PATCH",headers:await this.getAuthHeaders(),body:JSON.stringify({memoryUpdate:t})});if(!s.ok)throw Error(`Erreur ${s.status}: ${s.statusText}`);return s.json()}async healthCheck(){let e=await fetch("/api/health");if(!e.ok)throw Error(`Service indisponible: ${e.status}`);return e.json()}constructor(){this.baseUrl="/api/chat"}}new f;let b=e=>{let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/6e4),r=Math.floor(s/60),a=Math.floor(r/24);return s<1?"\xc0 l'instant":s<60?`Il y a ${s} min`:r<24?`Il y a ${r}h`:a<7?`Il y a ${a} jour${a>1?"s":""}`:t.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},v=e=>{let t=new Date(e);return new Date().getTime()-t.getTime()<3e5};function j({userId:e,className:t="",initialMessage:c,userContext:x}){let[g,f]=(0,a.useState)(""),[j,N]=(0,a.useState)(!1),y=(0,a.useRef)(null),w=(0,a.useRef)(null),{messages:D,isLoading:C,error:E,connectionStatus:S,sendMessage:P,resetConversation:_,saveMemory:A,retry:k,isEmpty:$}=function(e={}){let{userId:t,autoLoadHistory:r=!0,userContext:n}=e,[o,i]=(0,a.useState)({messages:[],isLoading:!1,error:null,connectionStatus:"disconnected"}),l=(0,a.useRef)(null),c=(0,a.useCallback)(async()=>{if(!t){i(e=>({...e,isLoading:!1,connectionStatus:"disconnected"}));return}try{i(e=>({...e,isLoading:!0,connectionStatus:"connecting"}));let e=await fetch(`/api/chat/history?userId=${t}`);if(!e.ok)throw{response:e};let s=await e.json();i(e=>({...e,messages:s.messages||[],isLoading:!1,connectionStatus:"connected",error:null}))}catch(t){console.error("Erreur chargement historique:",t);let e=await p(t);i(t=>({...t,isLoading:!1,connectionStatus:"disconnected",error:e}))}},[t]),d=(0,a.useCallback)(async e=>{if(!e.trim()||o.isLoading||!t)return;l.current&&l.current.abort(),l.current=new AbortController;let r={id:`user-${Date.now()}`,role:"user",content:e.trim(),timestamp:new Date().toISOString()};i(e=>({...e,messages:[...e.messages,r],isLoading:!0,error:null}));try{let{supabase:r}=await Promise.resolve().then(s.bind(s,24)),{data:{session:a}}=await r.auth.getSession(),o=a?.access_token;if(!o)throw Error("Session expir\xe9e");let c=await fetch("/api/chat/message",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({message:e.trim(),userId:t,context:n}),signal:l.current.signal});if(!c.ok)throw{response:c};let d=await c.json(),u={id:`assistant-${Date.now()}`,role:"assistant",content:d.response||d.answer,timestamp:d.timestamp,sources:d.sources||[],processing_time:d.processing_time||0,suggestions:d.suggestions||[]};i(e=>({...e,messages:[...e.messages,u],isLoading:!1,connectionStatus:"connected"}))}catch(t){if("AbortError"===t.name)return;console.error("Erreur envoi message:",t);let e=await p(t);i(t=>({...t,isLoading:!1,connectionStatus:"disconnected",error:e}))}},[t,o.isLoading]),u=(0,a.useCallback)(async()=>{if(t)try{if(i(e=>({...e,isLoading:!0})),!(await fetch("/api/chat/reset",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t})})).ok)throw Error("Erreur lors de la r\xe9initialisation");i(e=>({...e,messages:[],isLoading:!1,error:null}))}catch(e){console.error("Erreur reset:",e),i(t=>({...t,isLoading:!1,error:e.message}))}},[t]),m=(0,a.useCallback)(async(e,s="important")=>{if(!t)return!1;try{if(!(await fetch("/api/chat/memory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,memory:e,type:s})})).ok)throw Error("Erreur sauvegarde m\xe9moire");return!0}catch(e){return console.error("Erreur sauvegarde m\xe9moire:",e),!1}},[t]),h=(0,a.useCallback)(async(e,s)=>{if(!t)return null;try{i(e=>({...e,isLoading:!0}));let r=await fetch("/api/chat/analyze-document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document:e,userId:t,documentType:s})});if(!r.ok)throw Error("Erreur analyse document");let a=await r.json(),n={id:`analysis-${Date.now()}`,role:"assistant",content:`ðŸ“„ **Analyse de votre document :**

${a.analysis}

**Suggestions :**
${a.suggestions.map(e=>`â€¢ ${e}`).join("\n")}`,timestamp:new Date().toISOString()};return i(e=>({...e,messages:[...e.messages,n],isLoading:!1})),a}catch(e){return console.error("Erreur analyse document:",e),i(t=>({...t,isLoading:!1,error:e.message})),null}},[t]),x=(0,a.useCallback)(()=>{if(o.messages.length>0){let e=[...o.messages].reverse().find(e=>"user"===e.role);e&&(i(e=>({...e,messages:e.messages.filter(e=>!e.id.startsWith("error-")),error:null})),d(e.content))}},[o.messages,d]);return{messages:o.messages,isLoading:o.isLoading,error:o.error,connectionStatus:o.connectionStatus,sendMessage:d,resetConversation:u,saveMemory:m,analyzeDocument:h,loadChatHistory:c,retry:x,isEmpty:0===o.messages.length,lastMessage:o.messages[o.messages.length-1]||null}}({userId:e,autoLoadHistory:!0,userContext:x});if(!e)return r.jsx("div",{className:`flex items-center justify-center h-full bg-slate-50 ${t}`,children:(0,r.jsxs)("div",{className:"text-center max-w-md space-y-4",children:[r.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(n.Z,{className:"h-8 w-8 text-rose-500"})}),r.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Session expir\xe9e"}),r.jsx("p",{className:"text-slate-600",children:"Merci de vous reconnecter pour continuer \xe0 discuter avec Phoenix. Votre s\xe9curit\xe9 passe avant tout."})]})});let T=async e=>{if(e.preventDefault(),!g.trim()||C)return;let t=g.trim();f(""),N(!1),await P(t)},q=async e=>{let t={hello:"Bonjour Phoenix, j'aurais besoin d'aide pour accompagner mon enfant.",aeeh_calc:"Mon enfant a un handicap. Puis-je avoir l'AEEH et \xe0 combien ai-je droit ?",parent_solo:"Je suis parent isol\xe9 avec un enfant handicap\xe9. Quelles majorations puis-je avoir ?",aesh_demande:"Mon enfant entre \xe0 l'\xe9cole. Comment demander un AESH ?",dossier_mdph:"Je dois constituer un dossier MDPH. Quels documents dois-je pr\xe9parer ?",cumul_aides:"Puis-je cumuler AEEH, allocations familiales et ARS ?",recours_mdph:"Ma demande MDPH a \xe9t\xe9 refus\xe9e. Comment faire un recours ?",caf_handicap:"Quelles aides de la CAF existent pour les familles avec enfant handicap\xe9 ?",transport:"Comment obtenir un transport scolaire adapt\xe9 pour mon enfant ?"}[e];t&&(f(""),N(!1),await P(t))},M=({message:e,index:t})=>{let s="user"===e.role,a=v(e.timestamp);return r.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} mb-4`,children:(0,r.jsxs)("div",{className:`
          max-w-[85%] rounded-2xl px-4 py-3 relative
          ${s?"bg-rose-500 text-white":"bg-white shadow-sm border border-slate-200"}
          ${a?"animate-in slide-in-from-bottom-2 duration-300":""}
        `,children:[!s&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(n.Z,{className:"h-4 w-4 text-rose-500"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Phoenix"}),r.jsx("span",{className:"text-xs text-slate-500",children:"â€¢ Conseiller expert"})]}),r.jsx("div",{className:`prose prose-sm max-w-none leading-relaxed ${s?"text-white":"text-slate-800"}`,children:r.jsx(h.UG,{children:e.content})}),!s&&e.sources&&e.sources.length>0&&(0,r.jsxs)("div",{className:"mt-3 pt-2 border-t border-slate-100",children:[r.jsx("div",{className:"text-xs text-slate-500 mb-2",children:"\uD83D\uDCDA Sources consult\xe9es :"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:e.sources.map((e,t)=>(0,r.jsxs)("span",{className:"inline-block bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs border border-blue-200",children:["\uD83D\uDCC4 ",e.length>40?e.substring(0,40)+"...":e]},t))})]}),!s&&e.suggestions&&e.suggestions.length>0&&(0,r.jsxs)("div",{className:"mt-3 pt-2 border-t border-slate-100",children:[r.jsx("div",{className:"text-xs text-slate-500 mb-2",children:"\uD83D\uDCA1 Questions sugg\xe9r\xe9es :"}),r.jsx("div",{className:"flex flex-col gap-2",children:e.suggestions.map((e,t)=>r.jsx("button",{onClick:()=>{f(e),w.current?.focus()},className:"text-left text-sm bg-rose-50 hover:bg-rose-100 text-rose-700 px-3 py-2 rounded-lg transition-colors border border-rose-200 hover:border-rose-300",children:e},t))})]}),(0,r.jsxs)("div",{className:`text-xs mt-2 ${s?"text-rose-100":"text-slate-400"}`,children:[b(e.timestamp),!s&&e.processing_time&&(0,r.jsxs)("span",{className:"ml-2",children:["â€¢ R\xe9ponse en ",e.processing_time.toFixed(1),"s"]})]}),!s&&t===D.length-1&&e.content.toLowerCase().includes("aeeh")&&(0,r.jsxs)("div",{className:"mt-3 pt-2 border-t border-slate-100",children:[r.jsx("div",{className:"text-xs text-slate-500 mb-2",children:"\uD83D\uDCA1 Questions fr\xe9quentes ensuite :"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>P("Combien de temps pour avoir une r\xe9ponse MDPH ?"),className:"text-xs bg-rose-50 text-rose-700 px-2 py-1 rounded hover:bg-rose-100 transition-colors",children:"â±ï¸ D\xe9lais MDPH ?"}),r.jsx("button",{onClick:()=>P("Puis-je cumuler AEEH et allocations familiales ?"),className:"text-xs bg-rose-50 text-rose-700 px-2 py-1 rounded hover:bg-rose-100 transition-colors",children:"\uD83D\uDD04 Cumul possibles ?"}),r.jsx("button",{onClick:()=>P("Comment faire un recours si refus AEEH ?"),className:"text-xs bg-rose-50 text-rose-700 px-2 py-1 rounded hover:bg-rose-100 transition-colors",children:"âš–ï¸ En cas de refus ?"})]})]}),!s&&t===D.length-1&&r.jsx("button",{onClick:()=>A(e.content,"helpful_response"),className:"absolute -bottom-2 -right-2 bg-rose-100 hover:bg-rose-200 text-rose-600 rounded-full p-1 transition-colors",title:"Sauvegarder cette r\xe9ponse",children:r.jsx(n.Z,{className:"h-3 w-3"})})]})})},H=()=>(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 p-4 bg-slate-50 rounded-lg mb-4",children:[(0,r.jsxs)("button",{onClick:()=>q("aeeh_calc"),className:"p-3 text-left rounded-xl border border-slate-200 hover:border-rose-300 hover:bg-white transition-all",children:[r.jsx("div",{className:"font-medium text-slate-800",children:"\uD83D\uDCB0 Calculer AEEH"}),r.jsx("div",{className:"text-sm text-slate-600",children:"Montants & \xe9ligibilit\xe9"})]}),(0,r.jsxs)("button",{onClick:()=>q("parent_solo"),className:"p-3 text-left rounded-xl border border-slate-200 hover:border-rose-300 hover:bg-white transition-all",children:[r.jsx("div",{className:"font-medium text-slate-800",children:"\uD83D\uDC69â€\uD83D\uDC67 Parent isol\xe9"}),r.jsx("div",{className:"text-sm text-slate-600",children:"Majorations sp\xe9ciales"})]}),(0,r.jsxs)("button",{onClick:()=>q("aesh_demande"),className:"p-3 text-left rounded-xl border border-slate-200 hover:border-rose-300 hover:bg-white transition-all",children:[r.jsx("div",{className:"font-medium text-slate-800",children:"\uD83C\uDFEB Demander AESH"}),r.jsx("div",{className:"text-sm text-slate-600",children:"\xc9cole & accompagnement"})]}),(0,r.jsxs)("button",{onClick:()=>q("dossier_mdph"),className:"p-3 text-left rounded-xl border border-slate-200 hover:border-rose-300 hover:bg-white transition-all",children:[r.jsx("div",{className:"font-medium text-slate-800",children:"\uD83D\uDCCB Dossier MDPH"}),r.jsx("div",{className:"text-sm text-slate-600",children:"Documents & d\xe9marches"})]}),(0,r.jsxs)("button",{onClick:()=>q("cumul_aides"),className:"p-3 text-left rounded-xl border border-slate-200 hover:border-rose-300 hover:bg-white transition-all",children:[r.jsx("div",{className:"font-medium text-slate-800",children:"\uD83D\uDD04 Cumul d'aides"}),r.jsx("div",{className:"text-sm text-slate-600",children:"AEEH + CAF + autres"})]}),(0,r.jsxs)("button",{onClick:()=>q("recours_mdph"),className:"p-3 text-left rounded-xl border border-slate-200 hover:border-rose-300 hover:bg-white transition-all",children:[r.jsx("div",{className:"font-medium text-slate-800",children:"âš–ï¸ Recours MDPH"}),r.jsx("div",{className:"text-sm text-slate-600",children:"Refus & contestation"})]}),(0,r.jsxs)("button",{onClick:()=>q("caf_handicap"),className:"p-3 text-left rounded-xl border border-slate-200 hover:border-rose-300 hover:bg-white transition-all",children:[r.jsx("div",{className:"font-medium text-slate-800",children:"\uD83C\uDFDBï¸ Aides CAF"}),r.jsx("div",{className:"text-sm text-slate-600",children:"Allocations familiales"})]}),(0,r.jsxs)("button",{onClick:()=>q("transport"),className:"p-3 text-left rounded-xl border border-slate-200 hover:border-rose-300 hover:bg-white transition-all",children:[r.jsx("div",{className:"font-medium text-slate-800",children:"\uD83D\uDE8C Transport adapt\xe9"}),r.jsx("div",{className:"text-sm text-slate-600",children:"\xc9cole & d\xe9placements"})]})]});return(0,r.jsxs)("div",{className:`flex flex-col h-full bg-slate-50 ${t}`,children:[r.jsx("div",{className:"bg-white border-b border-slate-200 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-rose-100 rounded-full flex items-center justify-center",children:r.jsx(n.Z,{className:"h-5 w-5 text-rose-500"})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"font-semibold text-slate-900",children:"Phoenix"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Votre assistant empathique"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(()=>{let e={connected:{icon:o.Z,color:"text-green-500",text:"Connect\xe9"},connecting:{icon:i.Z,color:"text-yellow-500",text:"Connexion..."},disconnected:{icon:l.Z,color:"text-red-500",text:"D\xe9connect\xe9"}}[S],t=e.icon;return(0,r.jsxs)("div",{className:`flex items-center gap-2 text-sm ${e.color}`,children:[r.jsx(t,{className:`h-4 w-4 ${"connecting"===S?"animate-spin":""}`}),e.text]})},{}),r.jsx("button",{onClick:_,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Nouvelle conversation",children:r.jsx(d,{className:"h-4 w-4"})})]})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[$&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(n.Z,{className:"h-8 w-8 text-rose-500"})}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Bonjour ! Je suis Phoenix \uD83D\uDD4Aï¸"}),(0,r.jsxs)("p",{className:"text-slate-600 mb-6 max-w-md mx-auto",children:[r.jsx("strong",{children:"Conseiller social expert"})," combinant l'expertise MDPH + CAF + droits parentaux. Je vous accompagne pour toutes vos d\xe9marches : AEEH, allocations, AESH, recours, et bien plus !"]}),r.jsx(H,{})]}),D.map((e,t)=>r.jsx(M,{message:e,index:t},e.id)),C&&r.jsx("div",{className:"flex justify-start mb-4",children:(0,r.jsxs)("div",{className:"bg-white shadow-sm border border-slate-200 rounded-2xl px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(n.Z,{className:"h-4 w-4 text-rose-500"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Phoenix"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx(i.Z,{className:"h-4 w-4 text-slate-400 animate-spin"}),r.jsx("span",{className:"text-slate-600",children:"Phoenix r\xe9fl\xe9chit..."})]})]})}),E&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-700 mb-2",children:[r.jsx(l.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"font-medium",children:"Oups, une difficult\xe9 technique"})]}),r.jsx("p",{className:"text-red-600 text-sm mb-3",children:E}),r.jsx("button",{onClick:k,className:"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1 rounded-md text-sm transition-colors",children:"R\xe9essayer"})]}),r.jsx("div",{ref:y})]}),(0,r.jsxs)("div",{className:"bg-white border-t border-slate-200 px-6 py-4",children:[j&&!$&&r.jsx(H,{}),(0,r.jsxs)("form",{onSubmit:T,className:"flex gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[r.jsx("textarea",{ref:w,value:g,onChange:e=>f(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),T(e))},placeholder:"\xc9crivez votre message \xe0 Phoenix...",className:"w-full px-4 py-3 pr-12 border border-slate-300 rounded-xl resize-none focus:ring-2 focus:ring-rose-300 focus:border-rose-300 focus:outline-none transition-all",rows:1,style:{minHeight:"50px",maxHeight:"120px"},disabled:C}),!$&&r.jsx("button",{type:"button",onClick:()=>N(!j),className:"absolute right-3 top-3 p-1 text-slate-400 hover:text-slate-600 transition-colors",title:"Actions rapides",children:r.jsx(u.Z,{className:"h-4 w-4"})})]}),r.jsx("button",{type:"submit",disabled:!g.trim()||C,className:"bg-rose-500 hover:bg-rose-600 disabled:bg-slate-300 disabled:cursor-not-allowed text-white p-3 rounded-xl transition-colors focus:ring-2 focus:ring-rose-300 focus:outline-none",children:C?r.jsx(i.Z,{className:"h-5 w-5 animate-spin"}):r.jsx(m,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"text-xs text-slate-500 mt-2 text-center",children:"Phoenix garde en m\xe9moire vos conversations pour mieux vous accompagner"})]})]})}var N=s(1955),y=s(6153),w=s(6614);function D(){let{user:e,loading:t}=(0,N.K)(),s=(0,y.useSearchParams)().get("q"),{aides:a}=(0,w.fN)(),{documents:n}=(0,w.GK)(),{deadlines:o}=(0,w.hT)(),{profile:i}=(0,w.mH)();return t?r.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-rose-500 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"Chargement..."})]})}):r.jsx("div",{className:"h-screen",children:r.jsx(j,{userId:e?.id||"anonymous",initialMessage:s||void 0,userContext:{aides:a,documents:n,deadlines:o,profile:i}})})}function C(){return r.jsx(a.Suspense,{fallback:r.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-rose-500 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"Chargement..."})]})}),children:r.jsx(D,{})})}},6614:(e,t,s)=>{"use strict";s.d(t,{GK:()=>o,fN:()=>n,hT:()=>i,mH:()=>l});var r=s(5507);s(24);var a=s(1955);function n(){let{user:e}=(0,a.K)(),[t,s]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[i,l]=(0,r.useState)(null);return{aides:t,loading:n,error:i}}function o(){let{user:e}=(0,a.K)(),[t,s]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[i,l]=(0,r.useState)(null);return{documents:t,loading:n,error:i}}function i(){let{user:e}=(0,a.K)(),[t,s]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[i,l]=(0,r.useState)(null);return{deadlines:t,loading:n,error:i}}function l(){let{user:e}=(0,a.K)(),[t,s]=(0,r.useState)(null),[n,o]=(0,r.useState)([]),[i,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null);return{profile:t,children:n,loading:i,error:c}}},2837:(e,t,s)=>{"use strict";s.d(t,{P:()=>r});let r={nav:{home:"Accueil",login:"Connexion",dashboard:"Tableau de bord",children:"Enfants",documents:"Documents",consents:"Consentements",logout:"Se d\xe9connecter"},landing:{hero:{title:"PhoenixCare \uD83D\uDD4Aï¸",subtitle:"Votre compagnon num\xe9rique pour accompagner votre enfant en situation de handicap",cta_primary:"Commencer maintenant",cta_secondary:"En savoir plus"},values:{title:"Pourquoi PhoenixCare ?",items:[{title:"Centralisation",description:"Tous vos documents et d\xe9marches au m\xeame endroit",icon:"FileText"},{title:"Simplicit\xe9",description:"Interface intuitive con\xe7ue pour les parents",icon:"Heart"},{title:"S\xe9curit\xe9",description:"Vos donn\xe9es prot\xe9g\xe9es et confidentielles",icon:"ShieldCheck"}]},howItWorks:{title:"Comment \xe7a marche ?",steps:[{title:"Cr\xe9ez votre compte",description:"Inscription simple et s\xe9curis\xe9e"},{title:"Ajoutez vos enfants",description:"Informations m\xe9dicales et administratives"},{title:"Importez vos documents",description:"Dossiers m\xe9dicaux, consentements, etc."},{title:"Partagez en toute s\xe9curit\xe9",description:"Avec les professionnels de sant\xe9"}]},testimonials:{title:"T\xe9moignages",items:[{quote:'"PhoenixCare m\'a fait gagner un temps pr\xe9cieux dans la gestion des papiers m\xe9dicaux de mon fils."',author:"Marie, m\xe8re d'un enfant autiste"},{quote:'"Enfin une solution simple pour partager les informations importantes avec l\'\xe9quipe m\xe9dicale."',author:"Pierre, p\xe8re d'une enfant trisomique"}]},faq:{title:"Questions fr\xe9quentes",items:[{question:"Mes donn\xe9es sont-elles s\xe9curis\xe9es ?",answer:"Oui, toutes vos donn\xe9es sont chiffr\xe9es et stock\xe9es de mani\xe8re s\xe9curis\xe9e, conform\xe9ment au RGPD."},{question:"Puis-je partager l'acc\xe8s avec les professionnels de sant\xe9 ?",answer:"Oui, vous pouvez cr\xe9er des acc\xe8s temporaires ou permanents selon vos besoins."},{question:"L'application est-elle gratuite ?",answer:"Oui, PhoenixCare est enti\xe8rement gratuit pour accompagner les familles."}]},footer:{cta:"Pr\xeat \xe0 simplifier votre quotidien ?",cta_button:"Cr\xe9er mon compte",copyright:"\xa9 2024 PhoenixCare. Tous droits r\xe9serv\xe9s."}},auth:{login:{title:"Se connecter \xe0 PhoenixCare",email:"Adresse email",password:"Mot de passe",submit:"Se connecter",forgot_password:"Mot de passe oubli\xe9 ?"},errors:{invalid_credentials:"Email ou mot de passe incorrect",network_error:"Erreur de connexion. Veuillez r\xe9essayer."}},dashboard:{welcome:"Bonjour, {name}",actions:{add_child:"Ajouter un enfant",import_document:"Importer un document",share_access:"Partager un acc\xe8s"},recent_activity:"Activit\xe9s r\xe9centes",no_activity:"Aucune activit\xe9 r\xe9cente"},children:{title:"Mes enfants",add_child:"Ajouter un enfant",no_children:"Aucun enfant enregistr\xe9",add_child_description:"Ajoutez les informations de votre enfant pour commencer",form:{first_name:"Pr\xe9nom",last_name:"Nom",birth_date:"Date de naissance",medical_info:"Informations m\xe9dicales",submit:"Enregistrer",cancel:"Annuler"}},documents:{title:"Mes documents",upload:"Importer un document",no_documents:"Aucun document",upload_description:"Glissez-d\xe9posez vos documents ici ou cliquez pour s\xe9lectionner",uploading:"T\xe9l\xe9chargement en cours...",success:"Document t\xe9l\xe9charg\xe9 avec succ\xe8s",error:"Erreur lors du t\xe9l\xe9chargement"},consents:{title:"Consentements",add_consent:"Nouveau consentement",no_consents:"Aucun consentement",recipient:"Destinataire",scope:"P\xe9rim\xe8tre",status:"Statut",statuses:{pending:"En attente",approved:"Approuv\xe9",rejected:"Refus\xe9",expired:"Expir\xe9"}},common:{loading:"Chargement...",error:"Une erreur est survenue",success:"Op\xe9ration r\xe9ussie",cancel:"Annuler",save:"Enregistrer",delete:"Supprimer",edit:"Modifier",search:"Rechercher",filter:"Filtrer",sort:"Trier",export:"Exporter",import:"Importer",download:"T\xe9l\xe9charger",upload:"T\xe9l\xe9charger",close:"Fermer",back:"Retour",next:"Suivant",previous:"Pr\xe9c\xe9dent",finish:"Terminer"},errors:{UNKNOWN_ERROR:"Une erreur inattendue est survenue. L'\xe9quipe technique a \xe9t\xe9 pr\xe9venue.",DB_FETCH_FAILED:"Je n'arrive pas \xe0 acc\xe9der aux informations pour le moment. Veuillez r\xe9essayer dans quelques instants.",AI_SERVICE_ERROR:"Mon service d'intelligence artificielle rencontre des difficult\xe9s. Veuillez patienter un peu avant de r\xe9essayer.",network:"Erreur de connexion. Veuillez v\xe9rifier votre connexion internet.",server:"Erreur serveur. Nos \xe9quipes ont \xe9t\xe9 notifi\xe9es.",validation:"Veuillez corriger les erreurs dans le formulaire.",unauthorized:"Vous n'\xeates pas autoris\xe9 \xe0 acc\xe9der \xe0 cette ressource.",not_found:"La page demand\xe9e n'existe pas.",forbidden:"Acc\xe8s interdit \xe0 cette resource."},success:{saved:"Modifications enregistr\xe9es avec succ\xe8s",deleted:"\xc9l\xe9ment supprim\xe9 avec succ\xe8s",uploaded:"Fichier t\xe9l\xe9charg\xe9 avec succ\xe8s",shared:"Acc\xe8s partag\xe9 avec succ\xe8s"}}},9290:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2772).createProxy)(String.raw`/Users/mattvaness/Desktop/IA/phoenix-careops/client/app/(protected)/chat/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[942,237,696,496,838],()=>s(7214));module.exports=r})();